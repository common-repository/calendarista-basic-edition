/*
 Copyright @ 2018 Alessandro Zifiglio. All rights reserved. https://www.calendarista.com
*/
(function(f){var e=f.Calendarista||{};e.createDelegate=function(k,c){return function(){return c.apply(k,arguments)}};e.createCallback=function(k,c,a){return function(){var b=arguments.length;if(b>0){for(var d=[],g=0;g<b;g++)d[g]=arguments[g];d[b]=a;return k.apply(c||this,d)}return k.call(c||this,a)}};f.Calendarista||(f.Calendarista=e)})(window);
(function(f){var e=f.Calendarista||function(){};e.Cookie=function(){};e.Cookie.create=function(k,c,a){var b;if(a){b=new Date;b.setTime(b.getTime()+a*24*60*60*1E3);a="; expires="+b.toGMTString()}else a="";document.cookie=k+"="+c+a+"; path=/"};e.Cookie.read=function(k){k=k+"=";var c=document.cookie.split(";"),a,b;for(b=0;b<c.length;b++){for(a=c[b];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(k)==0)return a.substring(k.length,a.length)}return null};e.Cookie.erase=function(k){e.Cookie.create(k,
"",-1)};e.Cookie.destroy=function(){};f.Calendarista||(f.Calendarista=e)})(window);
(function(f,e){e.ajax=function(k){this.init(k);this.destroyDelegate=e.createDelegate(this,this.destroy);f(window).on("unload",this.destroyDelegate)};e.ajax.prototype.init=function(k){this.options=k;this.id=k.id;this.ajaxUrl=k.ajaxUrl};e.ajax.prototype.navButtonState=function(k){(function(c,a,b,d){var g;if(typeof a.appointment!=="undefined"){g=a.appointment;a=f("#"+d);if([0,1].indexOf(g)!==-1)a=f(".ui-dialog-buttonset."+d);d=a.find('button[name="next"]');a.find('button[name="prev"]');if(d.length>0)if(c.flag1||
!b&&d[0].hasAttribute("disabled"))c.flag1=!c.flag1;else b?d.prop("disabled",false).removeClass("ui-state-disabled"):d.prop("disabled",true).addClass("ui-state-disabled")}})(this,this.options,k,this.id)};e.ajax.prototype.request=function(k,c,a){(function(b,d,g,h){h.showSpinner();h.navButtonState(false);f.post(h.ajaxUrl,g,function(i){d.call(b,i);h.hideSpinner();h.navButtonState(true)})})(k,c,a,this)};e.ajax.prototype.showSpinner=function(){f("#spinner_"+this.id).removeClass("calendarista-invisible")};
e.ajax.prototype.hideSpinner=function(){f("#spinner_"+this.id).addClass("calendarista-invisible")};e.ajax.prototype.destroy=function(){if(this.destroyDelegate){f(window).off("unload",this.destroyDelegate);delete this.destroyDelegate}}})(window.jQuery,window.Calendarista);
(function(f,e,k){e.wizard=function(c){this.init(c);this.destroyDelegate=e.createDelegate(this,this.destroy);f(window).on("unload",this.destroyDelegate)};e.wizard.prototype.init=function(c){this.id=c.id;this.wizardAction=c.wizardAction;this.ajaxUrl=k.url;this.requestUrl=c.requestUrl;this.ajax=new e.ajax({ajaxUrl:this.ajaxUrl,id:this.id});this.prevIndex=c.prevIndex;this.nextIndex=c.nextIndex;this.stepCounter=c.stepCounter;this.appointment=c.appointment;this.selectedStepName=c.selectedStepName;this.selectedStepIndex=
c.selectedStepIndex;this.invoiceId=c.invoiceId;this.editMode=typeof c.editMode!=="undefined"?c.editMode:0;this.steps=c.steps;this.externalDialog=c.externalDialog;this.$footer=this.$root=f("#"+this.id);if(this.externalDialog)this.$footer=f(".ui-dialog-buttonset."+this.id);this.initAjaxElements()};e.wizard.prototype.initAjaxElements=function(){var c,a,b,d=this;this.$form=this.$root.find("form");this.$prevButton=this.$footer.find('button[name="prev"]');this.$nextButton=this.$footer.find('button[name="next"]');
this.$bookNowButton=this.$footer.find('button[name="booknow"]');this.$disposeButton=this.$footer.find('button[name="dispose"]');this.$tabItemLinks=this.$root.find(".nav-item a");this.$navTabs=this.$root.find(".nav.nav-tabs");this.$dropdownList=this.$root.find("#dropdown_"+this.id);this.$dropdownListOptions=this.$dropdownList.find("option");this.prevButtonClickDelegate=e.createDelegate(this,this.prevButtonClick);this.$prevButton.on("click",this.prevButtonClickDelegate);this.nextButtonClickDelegate=
e.createDelegate(this,this.nextButtonClick);this.$nextButton.on("click",this.nextButtonClickDelegate);this.disposeButtonClickDelegate=e.createDelegate(this,this.closeDialogClick);this.$disposeButton.on("click",this.disposeButtonClickDelegate);this.windowResizeDelegate=e.createDelegate(this,this.windowResize);f(window).on("resize",this.windowResizeDelegate);this.$tabItemLinks.on("click",function(g){var h=f(g.currentTarget);g.preventDefault();h.prop("disabled")||d.request(parseInt(h.attr("data-calendarista-index"),
10));return false});this.$dropdownList.on("change",function(g){g=f(g.currentTarget).find(":selected");d.request(parseInt(g.attr("data-calendarista-index"),10))});this.createAppointment();for(c=0;c<this.$tabItemLinks.length;c++){a=f(this.$tabItemLinks[c]);b=parseInt(a.attr("data-calendarista-index"),10);if(b===this.selectedStepIndex||this.appointment!==1&&b>this.selectedStepIndex){a.prop("disabled",true);a.addClass("calendarista-disabled disabled")}}for(c=0;c<this.$dropdownListOptions.length;c++){a=
f(this.$dropdownListOptions[c]);b=parseInt(a.attr("data-calendarista-index"),10);if(b===this.selectedStepIndex||!this.editMode&&b>this.selectedStepIndex){a.prop("disabled",true);a.addClass("calendarista-disabled disabled")}}this.mobileCheck()};e.wizard.prototype.windowResize=function(){this.mobileCheck()};e.wizard.prototype.mobileCheck=function(){if(this.appointment!==1&&window.innerWidth>=768){this.$navTabs.removeClass("hide");this.$dropdownList.addClass("hide")}else{this.$dropdownList.removeClass("hide");
this.$navTabs.addClass("hide")}};e.wizard.prototype.createAppointment=function(){if(this.$prevButton.length>0){this.$prevButton.prop("disabled",true).addClass("ui-state-disabled");this.$prevButton.val(this.prevIndex);this.prevIndex>0&&this.$prevButton.prop("disabled",false).removeClass("ui-state-disabled")}if(this.$nextButton.length>0){this.$nextButton.prop("disabled",true).addClass("ui-state-disabled");this.$nextButton.val(this.nextIndex)}this.$bookNowButton.length>0&&this.$bookNowButton.prop("disabled",
true).addClass("ui-state-disabled");if(this.nextIndex<=this.stepCounter)this.$nextButton.length>0&&!this.$nextButton[0].hasAttribute("data-calendarista-closed")&&this.$nextButton.prop("disabled",false).removeClass("ui-state-disabled");else this.$bookNowButton.length>0&&this.nextIndex===this.stepCounter+1&&this.$bookNowButton.prop("disabled",false).removeClass("ui-state-disabled")};e.wizard.prototype.navButtonClick=function(c){c.preventDefault();this.request(parseInt(f(c.target).val(),10))};e.wizard.prototype.prevButtonClick=
function(c){c.preventDefault();this.request(parseInt(this.$prevButton.val(),10))};e.wizard.isValid=function(c,a){var b=true;a||(a=".calendarista_parsley_validated, .woald_parsley_validated");c.find(a).each(function(){var d=f(this);if(d.prop("type")!=="hidden"&&(!d.is(":visible")||d.is(":disabled")||d.attr("data-parsley-excluded")))return true;d.parsley().reset();d=d.parsley?d.parsley().validate():true;if(d!==null&&typeof d==="object"&&d.length>0)b=false});return b};e.wizard.prototype.nextButtonClick=
function(c){c.preventDefault();var a=this.$root.find('input[name="multiDateSelection"]');c=this.$root.find('input[name="bookingDaysMinimum"]');c=c.length>0?parseInt(c.val(),10):0;a=(a=a.val())?a.split(";"):[];e.wizard.isValid(this.$root,a.length>0&&(!c||a.length>=c)?".calendarista-dynamicfield.calendarista_parsley_validated":null)?this.request(parseInt(this.$nextButton.val(),10)):this.scrollTop()};e.wizard.prototype.closeDialogClick=function(c){c.preventDefault();this.destroy()};e.wizard.prototype.request=
function(c){var a=this.$form.serializeArray();a.push({name:"selectedStep",value:c});a.push({name:"editMode",value:this.editMode});a.push({name:"action",value:this.wizardAction});a.push({name:"calendarista_nonce",value:k.nonce});this.ajax.request(this,this.response,f.param(a))};e.wizard.prototype.response=function(c){this.destroy();this.$root=this.$root.replaceWith(c);this.scrollTop()};e.wizard.prototype.scrollTop=function(){var c=f("#navbar_"+this.id),a=f("#dropdown_"+this.id);c=!c.hasClass("hide")?
c:a;c.length>0&&c[0].scrollIntoView({block:"center",behaviour:"smooth"})};e.wizard.prototype.destroy=function(){this.$prevButton&&this.$prevButton.off();this.$nextButton&&this.$nextButton.off();this.$tabItemLinks&&this.$tabItemLinks.off();this.$dropdownList&&this.$dropdownList.off();this.$disposeButton&&this.$disposeButton.off("click",this.disposeButtonClickDelegate);delete this.$bookNowButton;delete this.bookNowButtonClickDelegate;delete this.prevButtonClickDelegate;delete this.$prevButton;delete this.nextButtonClickDelegate;
delete this.$nextButton;delete this.$tabItemLinks;delete this.$footer;delete this.$disposeButton;delete this.disposeButtonClickDelegate;if(this.destroyDelegate){f(window).off("unload",this.destroyDelegate);delete this.destroyDelegate}}})(window.jQuery,window.Calendarista,window.calendarista_wp_ajax);
(function(f,e,k,c){e.calendar=function(a){var b;if(!f.fn.bootstrapDP&&f.fn.datepicker&&f.fn.datepicker.noConflict){b=f.fn.datepicker.noConflict();f.fn.bootstrapDP=b}this.init(a);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.calendar.prototype.init=function(a){this.id=a.id;this.$root=f("#"+this.id);this.actionWizard="calendarista_wizard";this.actionMonthChange="calendarista_calendar_month_change";this.actionStartDaySelected="calendarista_calendar_start_day_selected";
this.actionEndDaySelected="calendarista_calendar_end_day_selected";this.actionSeats="calendarista_seats";this.actionDynamicFields="calendarista_dynamic_fields";this.actionCostSummary="calendarista_cost_summary";this.actionBookMore="calendarista_bookmore";this.actionRepeat="calendarista_repeat";this.timeslotCalendarModes=[1,2,4,8,9,12];this.calendarMode=a.calendarMode;this.ajaxUrl=c.url;this.projectId=a.projectId;this.dateFormat=a.dateFormat?a.dateFormat:"DD, d MM, yy";this.thumbnails=a.thumbnails;
this.appointment=a.appointment;this.bookingDaysMinimum=a.bookingDaysMinimum;this.bookingDaysMaximum=a.bookingDaysMaximum;this.dayCountMode=a.dayCountMode;this.minTime=a.minTime;this.maxTime=a.maxTime;this.returnSameDay=a.returnSameDay;this.returnOptional=a.returnOptional;this.firstDayOfWeek=a.firstDayOfWeek;this.searchResultStartTime=a.searchResultStartTime;this.searchResultEndTime=a.searchResultEndTime;this.timeDisplayMode=a.timeDisplayMode;this.enableMultipleBooking=a.enableMultipleBooking;this.clearLabel=
a.clearLabel;this.seasons=a.seasons;this.repeatPageSize=a.repeatPageSize;this.startCurrentMonthExclusions=[];this.startBookedOutDays=[];this.startHalfDays={start:[],end:[]};this.startCheckinWeekdayList=[];this.startCheckoutWeekdayList=[];this.startBookedAvailabilityList=[];this.holidays=[];this._startBookedAvailabilityList=[];this.serverDateFormat="yy-mm-dd";this.endCurrentMonthExclusions=[];this.endBookedOutDays=[];this.endHalfDays={start:[],end:[]};this.endCheckinWeekdayList=[];this.endCheckoutWeekdayList=
[];this.endBookedAvailabilityList=[];this._endBookedAvailabilityList=[];this.ajax=new e.ajax({ajaxUrl:this.ajaxUrl,id:this.id,appointment:this.appointment});this.$form=this.$root.find("form");this.$viewState=this.$root.find('input[name="__viewstate"]');this.$cart=this.$root.find('input[name="calendarista_cart"]');this.$startDate=this.$root.find(".calendarista-start-date");this.$endDate=this.$root.find(".calendarista-end-date");this.$startDateField=this.$root.find('input[name="availableDate"]');this.$endDateField=
this.$root.find('input[name="endDate"]');this.$clientStartDateField=this.$root.find('input[name="clientAvailableDate"]');this.$clientEndDateField=this.$root.find('input[name="clientEndDate"]');this.$timezone=this.$root.find('input[name="timezone"]');this.$dateRangeError=this.$root.find(".calendarista-date-range-error");this.$timeslotsError=this.$root.find(".calendarista-timeslots-error");this.$timeslotsReturnError=this.$root.find(".calendarista-timeslots-return-error");this.$minTimeError=this.$root.find('input[name="minTime"]');
this.$maxTimeError=this.$root.find('input[name="maxTime"]');this.$startTimeslotPlaceHolder=this.$root.find(".calendarista-start-timeslot-placeholder");this.$endTimeslotPlaceHolder=this.$root.find(".calendarista-end-timeslot-placeholder");this.$seatsPlaceholder=this.$root.find(".calendarista-seats-placeholder");this.$bookMorePlaceholder=this.$root.find(".calendarista-bookmore-placeholder");this.$repeatPlaceholder=this.$root.find(".calendarista-repeat-appointment-placeholder");this.$seatsMaximum=this.$root.find('input[name="seatsMaximum"]');
this.$dynamicFieldsPlaceholder=this.$root.find(".calendarista-dynamicfield-placeholder");this.$dynamicFieldsCount=this.$root.find('input[name="dynamicFieldsCount"]');this.$calendarLegend=this.$root.find(".calendarista-calendar-legend"+this.projectId);this.$costSummaryPlaceholder=this.$root.find(".calendarista-cost-summary-placeholder");this.$orderId=this.$root.find('input[name="orderId"]');this.$projectList=this.$root.find('input[name="projectList"]');this.$projectsListbox=this.$root.find('select[name="projects"]');
this.$projectsRadioList=this.$root.find('input[name="projects"][type="radio"]');this.$projectId=this.$root.find('input[name="projectId"]');this.$projectsListbox.on("change",e.createDelegate(this,this.projectsChanged));this.$projectsRadioList.on("change",e.createDelegate(this,this.projectsChanged));this.$availabilityField=this.$root.find('input[name="availabilityId"]');this.$oldAvailabilityField=this.$root.find('input[name="oldAvailabilityId"]');this.availabilityId=parseInt(this.$availabilityField.val(),
10);this.$availabilityListbox=this.$root.find('select[name="availability"]');this.$availabilityRadioList=this.$root.find('input[name="availability"][type="radio"]');this.$availabilityListbox.on("change",e.createDelegate(this,this.availabilityChanged));this.$availabilityRadioList.on("change",e.createDelegate(this,this.availabilityChanged));this.$packageListbox=this.$root.find('select[name="package"]');this.$packageListbox.on("change",e.createDelegate(this,this.packageChanged));this.$packageDurationPlaceholder=
this.$root.find("#calendarista_package_duration_"+this.projectId);this.$wizardSectionBlock=this.$root.find(".calendarista-wizard-section-block");this.$wizardSectionThumbnail=this.$root.find(".calendarista-wizard-section-block-thumb");this.$availabilityPreviewUrlField=this.$root.find('input[name="availabilityPreviewUrl"]');this.$serviceThumbnailViewField=this.$root.find('input[name="serviceThumbnailView"]');this.$availabilityThumbnailViewField=this.$root.find('input[name="availabilityThumbnailView"]');
this.$minDate=this.$root.find('input[name="minDate"]');this.$seats=this.$root.find('input[name="seats"]');this.$multiDateSelection=this.$root.find('input[name="multiDateSelection"]');this.$liveAriaRegion=this.$root.find("#calendarista_liveregion");this.ariaLogDelegate=e.createDelegate(this,this.ariaLog);if([6].indexOf(this.calendarMode)!==-1)if(this.$packageListbox.length===0){this.$startDateField.val(this.$root.find('input[name="__availableDate"]').val());this.$endDateField.val(this.$root.find('input[name="__endDate"]').val());
this.seatsRequest()}else this.$packageListbox[0].selectedIndex>0&&this.packageSelected();else this.createCalendars();if(this.$multiDateSelection.val()){this.$startDateField.val("");this.$endDateField.val("");this.costSummaryRequest(true)}window["calendarista_cost_summary_request"+this.projectId]=e.createDelegate(this,this.mapCostSummaryRequest);this.callbackTimeslotSelected="calendarista_timeslot_selected"+this.availabilityId;this.applyAvailabilityThumbnail(this.availabilityId);this.timezone=k.determine().name();
this.$timezone.val(this.timezone);this.$projectsListbox.length>0&&this.$projectsListbox.removeAttr("disabled");this.$projectsRadioList.length>0&&this.$projectsRadioList.removeAttr("disabled");this.$availabilityListbox.length>0&&this.$availabilityListbox.removeAttr("disabled");this.$availabilityRadioList.length>0&&this.$availabilityRadioList.removeAttr("disabled")};e.calendar.prototype.requestCurrentMonthCalendar=function(){var a=new Date,b=a.getMonth()+1;this.calendarRequestByMonth(a.getFullYear(),
b,0);if(this.$endDate.length>0)this.requestEndDate=b;this.datepickerReset()};e.calendar.prototype.packageChanged=function(){var a=[],b=parseInt(this.$packageListbox.val(),10);a.push({name:"projectId",value:this.projectId});a.push({name:"availabilityId",value:b});a.push({name:"appointment",value:this.appointment});a.push({name:"projectList",value:this.$projectList.val()});a.push({name:"enableMultipleBooking",value:this.enableMultipleBooking?1:0});a.push({name:"calendarista_cart",value:this.$cart.val()});
a.push({name:"calendarista_nonce",value:c.nonce});this.appointment&&this.$orderId.length>0&&a.push({name:"orderId",value:this.$orderId.val()});a.push({name:"action",value:this.actionWizard});this.ajax.request(this,this.wizardResponse,f.param(a))};e.calendar.prototype.packageSelected=function(){var a=this.$packageListbox.find(":selected"),b=a.attr("data-calendarista-startdate");a=a.attr("data-calendarista-enddate");var d=this;this.availabilityId=parseInt(this.$packageListbox.val(),10);this.applyAvailabilityThumbnail(this.availabilityId);
if(this.availabilityId){this.$availabilityField.val(this.availabilityId);this.$startDateField.val(b);this.$endDateField.val(a);window.setTimeout(function(){d.seatsRequest()},1)}else this.datepickerReset()};e.calendar.prototype.applyAvailabilityThumbnail=function(a){var b,d,g;if(this.thumbnails.length){if(a)for(b=0;b<this.thumbnails.length;b++){d=this.thumbnails[b];if(d.id===a){g=d.url;break}}this.$wizardSectionBlock.addClass("calendarista-wizard-section-no-thumbnail");this.$wizardSectionBlock.removeClass("calendarista-wizard-section-thumbnail");
this.$wizardSectionThumbnail.css("display","none");this.$availabilityPreviewUrlField.val(g);if(g){this.$wizardSectionBlock.addClass("calendarista-wizard-section-thumbnail");this.$wizardSectionBlock.removeClass("calendarista-wizard-section-no-thumbnail");this.$wizardSectionThumbnail.css({display:"block","background-image":'url("'+g+'")'})}}};e.calendar.prototype.projectsChanged=function(a){a=f(a.currentTarget).val();a=parseInt(a,10);var b=this.$root.find('input[name="bookedAvailabilityId"]');b=b.length>
0?parseInt(b.val(),10):null;a=[{name:"projectId",value:a},{name:"projectList",value:this.$projectList.val()},{name:"bookedAvailabilityId",value:b},{name:"appointment",value:this.appointment},{name:"enableMultipleBooking",value:this.enableMultipleBooking?1:0},{name:"serviceThumbnailView",value:this.$serviceThumbnailViewField.val()},{name:"availabilityThumbnailView",value:this.$availabilityThumbnailViewField.val()},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionWizard},
{name:"calendarista_nonce",value:c.nonce}];this.appointment&&this.$orderId.length>0&&a.push({name:"orderId",value:this.$orderId.val()});this.ajax.request(this,this.wizardResponse,f.param(a))};e.calendar.prototype.wizardResponse=function(a){this.unload();this.$root.replaceWith(a)};e.calendar.prototype.availabilityChanged=function(a){var b=[],d=this.$root.find('input[name="bookedAvailabilityId"]');d=d.length>0?parseInt(d.val(),10):null;a=f(a.currentTarget).val();a=parseInt(a,10);b.push({name:"projectId",
value:this.projectId});b.push({name:"availabilityId",value:a});b.push({name:"bookedAvailabilityId",value:d});b.push({name:"appointment",value:this.appointment});b.push({name:"projectList",value:this.$projectList.val()});b.push({name:"serviceThumbnailView",value:this.$serviceThumbnailViewField.val()});b.push({name:"availabilityThumbnailView",value:this.$availabilityThumbnailViewField.val()});b.push({name:"enableMultipleBooking",value:this.enableMultipleBooking?1:0});b.push({name:"calendarista_cart",
value:this.$cart.val()});b.push({name:"action",value:this.actionWizard});b.push({name:"calendarista_nonce",value:c.nonce});this.appointment&&this.$orderId.length>0&&b.push({name:"orderId",value:this.$orderId.val()});this.ajax.request(this,this.wizardResponse,f.param(b))};e.calendar.prototype.createCalendars=function(){var a=this.parseDate(this.$minDate.val()),b=this.appointment===1?null:a;this.startDateBeforeShowDayDelegate=e.createDelegate(this,this.startDateBeforeShowDay);this.endDateBeforeShowDayDelegate=
e.createDelegate(this,this.endDateBeforeShowDay);this.onChangeMonthYearStartDateDelegate=e.createDelegate(this,this.onChangeMonthYearStartDate);this.onChangeMonthYearEndDateDelegate=e.createDelegate(this,this.onChangeMonthYearEndDate);this.onStartDateSelectDelegate=e.createDelegate(this,this.onStartDateSelect);this.onEndDateSelectDelegate=e.createDelegate(this,this.onEndDateSelect);this.onStartDateCloseDelegate=e.createDelegate(this,this.onStartDateClose);this.onEndDateCloseDelegate=e.createDelegate(this,
this.onEndDateClose);this.$startDate.datepicker({dateFormat:this.dateFormat,defaultDate:a,minDate:b,beforeShowDay:this.startDateBeforeShowDayDelegate,onChangeMonthYear:this.onChangeMonthYearStartDateDelegate,onSelect:this.onStartDateSelectDelegate,onClose:this.onStartDateCloseDelegate,showButtonPanel:true,closeText:this.clearLabel,firstDay:this.firstDayOfWeek}).on("keydown",this.ariaLogDelegate);this.$endDate.datepicker({dateFormat:this.dateFormat,defaultDate:a,minDate:b,beforeShowDay:this.endDateBeforeShowDayDelegate,
onChangeMonthYear:this.onChangeMonthYearEndDateDelegate,onSelect:this.onEndDateSelectDelegate,onClose:this.onEndDateCloseDelegate,showButtonPanel:true,closeText:this.clearLabel,firstDay:this.firstDayOfWeek}).on("keydown",this.ariaLogDelegate);this.$datepickerElement=f("#ui-datepicker-div");if(this.availabilityId){if(this.$startDate.length>0){this.$startDate.prop("disabled",true);this._startDateVal=this.$clientStartDateField.val();this.$startDate.val(this.$startDate.attr("data-calendarista-loading"))}if(this.$clientStartDateField.val())a=
this.parseDate(this.$clientStartDateField.val());if(this.$endDate.length>0){this.$endDate.prop("disabled",true);this._endDateVal=this.$clientEndDateField.val();this.$endDate.val(this.$endDate.attr("data-calendarista-loading"));this.requestEndDate=a}this.calendarRequestByMonth(a.getFullYear(),a.getMonth()+1,0)}};e.calendar.prototype.ariaLog=function(a){if(a.keyCode!==13){a=" "+f(".ui-state-hover").html()+" "+f(".ui-datepicker-month").html()+" "+f(".ui-datepicker-year").html();this.$liveAriaRegion.html(a)}};
e.calendar.prototype.getCalendarModelByMonth=function(a,b){return[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",value:this.appointment},{name:"changeMonthYear",value:a+"-"+this.pad(b)+"-01"},{name:"clientTime",value:this.toTime(new Date)},{name:"timezone",value:this.timezone},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionMonthChange},{name:"calendarista_nonce",value:c.nonce}]};e.calendar.prototype.calendarRequestByMonth=
function(a,b,d){a=this.getCalendarModelByMonth(a,b,d);a.push({name:"requestBy",value:d});d===1&&this.$startDate.prop("disabled",true);this.ajax.request(this,this.calendarResponseByMonth,f.param(a))};e.calendar.prototype.calendarResponseByMonth=function(a){var b=window.JSON.parse(a);this.monthYearResponse(a);if(this.$startDate.length>0&&b.requestBy===0){this.$startDate.val(this._startDateVal);if(this.$clientStartDateField.val()){this.startDateSelected=this.$clientStartDateField.val();this.setStartDate(this.startDateSelected);
this.onStartDateSelect(this.startDateSelected);this.$endDate.prop("disabled",false);[0].indexOf(this.calendarMode)!==-1&&this.repeatRequest()}this.$startDate.prop("disabled",false)}if(this.$endDate.length>0&&b.requestBy===1){this.$endDate.prop("disabled",false);this.$endDate.val(this._endDateVal);if(this.$clientEndDateField.val()){this.endDateSelected=this.$clientEndDateField.val();this.setEndDate(this.endDateSelected);this.onEndDateSelect(this.endDateSelected)}else!this._startDateVal&&!this._endDateVal&&
this.$endDate.prop("disabled",true);this.$startDate.prop("disabled",false)}if(this.requestEndDate){this.calendarRequestByMonth(this.requestEndDate.getFullYear(),this.requestEndDate.getMonth()+1,1);this.requestEndDate=null}};e.calendar.prototype.createUniqueCalendar=function(){var a="calendarista-calendar-"+this.projectId;if(this.$datepickerElement){this.$calendarLegend.removeClass("hide");this.$calendarLegend.appendTo(this.$datepickerElement);if(!this.$datepickerElement.hasClass(a)){this.$datepickerElement.removeClass(this.$datepickerElement.prop("data-calendarista-classname")+
" calendarista-flat calendarista-borderless");this.$datepickerElement.removeProp("data-calendarista-classname");this.$datepickerElement.prop("data-calendarista-classname",a);this.$datepickerElement.addClass(a+" calendarista-flat calendarista-borderless");this.$datepickerElement.attr("translate","no");this.$datepickerElement.addClass("notranslate");this.$datepickerElement.addClass("calendarista-datepicker")}}};e.calendar.prototype.resetUniqueCalendar=function(){};e.calendar.prototype.onStartDateClose=
function(a){var b,d=window.event||arguments.callee.caller.caller.caller.arguments[0];b=d.currentTarget||d.delegateTarget;d=new Date;var g=this.$minDate.val();if(a)d=this.parseDate(a);else if(g)d=this.parseDate(g);a&&this.$startDate.parsley().reset();this.$startDate.prop("disabled",false);this.resetUniqueCalendar();this.$dateRangeError.addClass("hide");this.$endDate.length>0&&a&&this.$endDate.prop("disabled",false);if(b&&f(b).hasClass("ui-datepicker-close"))this.datepickerReset();else{if(this.startDateSelected!==
a){this.startDateSelected=a;if(this.endDateSelected){b=this.validateDateRange(a,this.endDateSelected,0);if(!b){this.datepickerReset();this.$dateRangeError.removeClass("hide");return}this.setEndDate(null);this.endDateSelected=null;this.$endDateField.val("");this.$seatsPlaceholder.html("");this.$bookMorePlaceholder.html("");this.$repeatPlaceholder.html("");this.$dynamicFieldsPlaceholder.html("");this.costSummaryReset();if(this.$endTimeslotPlaceHolder){this.$endTimeListbox=null;this.$endTimeslotPlaceHolder.empty()}this.adjustStartTime();
this.$startDate.datepicker("option","maxDate",null)}else this.timeReset();this.$endDate&&this.$endDate.length>0&&a&&this.$endDate.datepicker("option","minDate",this.parseDate(a));[0].indexOf(this.calendarMode)!==-1&&a&&this.repeatRequest()}this.calendarRequestByMonth(d.getFullYear(),d.getMonth()+1,0)}};e.calendar.prototype.onEndDateClose=function(a){var b,d=window.event||arguments.callee.caller.caller.caller.arguments[0];b=d.currentTarget||d.delegateTarget;d=new Date;var g=this.$minDate.val();if(a)d=
this.parseDate(a);else if(this.startDateSelected)d=this.parseDate(this.startDateSelected);else if(g)d=this.parseDate(g);a&&this.$endDate.parsley().reset();this.$endDate.prop("disabled",false);this.resetUniqueCalendar();this.$dateRangeError.addClass("hide");if(b&&f(b).hasClass("ui-datepicker-close"))this.datepickerReset();else{if(this.endDateSelected!==a&&a){if(this.startDateSelected){b=this.validateDateRange(this.startDateSelected,a,1);if(!b){this.datepickerReset();this.$dateRangeError.removeClass("hide");
return}}this.startDateSelected===this.endDateSelected&&this.endDateSelected!==a&&this.timeReset();(this.endDateSelected=a)&&this.$startDate.datepicker("option","maxDate",this.parseDate(a))}this.calendarRequestByMonth(d.getFullYear(),d.getMonth()+1,1)}};e.calendar.prototype.datepickerReset=function(a){var b=this.parseDate(this.$minDate.val());a=typeof a==="undefined"?true:a;this.setStartDate(null);this.setEndDate(null);this.$startDate.datepicker("option","minDate",b);this.$startDate.datepicker("option",
"maxDate",null);this.$endDate.datepicker("option","minDate",new Date);this.$startTimeslotPlaceHolder&&this.$startTimeslotPlaceHolder.empty();this.$endTimeslotPlaceHolder&&this.$endTimeslotPlaceHolder.empty();this.$startDateField.val("");this.$endDateField.val("");this.endDateSelected=this.startDateSelected=null;this.$seatsPlaceholder.html("");this.$bookMorePlaceholder.html("");this.$repeatPlaceholder.html("");this.$dynamicFieldsPlaceholder.html("");a&&this.$costSummaryPlaceholder.html("");this.$startDate.length&&
this.$startDate.blur();this.$endDate.length&&this.$endDate.blur();this._startBookedAvailabilityList.length=0;this._endBookedAvailabilityList.length=0;this._endDateVal=this._startDateVal=null;this.$clientStartDateField.val("");this.$clientEndDateField.val("");this.calendarRequestByMonth(b.getFullYear(),b.getMonth()+1,0);if(this.$endDate.length>0)this.requestEndDate=b};e.calendar.prototype.validateDateRange=function(a,b,d){if(!a||!b)return false;var g=a instanceof Date?a:this.parseDate(a);b=b instanceof
Date?b:this.parseDate(b);var h=this.toYMD(g),i=this.toYMD(b),l=d===0?this.startHalfDays:this.endHalfDays,j=d===0?this.startBookedAvailabilityList.concat([]):this.endBookedAvailabilityList.concat([]),m=d===0?this._startBookedAvailabilityList:this._endBookedAvailabilityList;l=(l?l.start:[]).concat(l?l.end:[]);d=d===0?this.startBookedOutDays:this.endBookedOutDays;var n=0,s=true,q=this.bookingDaysMinimum,r=this.bookingDaysMaximum,p,o,u,t;if(d.length===0&&this.startBookedOutDays.length>0)d=this.startBookedOutDays;
if(this.startCurrentMonthExclusions.length>0)for(o=0;o<this.startCurrentMonthExclusions.length;o++){p=this.startCurrentMonthExclusions[o];d.indexOf(p)===-1&&d.push(p)}if(this.endCurrentMonthExclusions.length>0)for(o=0;o<this.endCurrentMonthExclusions.length;o++){p=this.endCurrentMonthExclusions[o];d.indexOf(p)===-1&&d.push(p)}if(this.seasons&&this.seasons.length>0)for(o=0;o<this.seasons.length;o++){p=this.seasons[o];u=this.parseDateByFormat(this.serverDateFormat,p.startDate);t=this.parseDateByFormat(this.serverDateFormat,
p.endDate);if(g>=u&&g<=t||b>=u&&b<=t){q=parseInt(p.bookingDaysMinimum,10);r=parseInt(p.bookingDaysMaximum,10);break}}if(m.length>0)for(o=0;o<m.length;o++){p=m[o];j.indexOf(p)===-1&&j.push(p)}for(o=0;o<this.holidays.length;o++){p=this.holidays[o];m=d.indexOf(p);m!==-1&&d.splice(m,1);m=j.indexOf(p);m!==-1&&j.splice(m,1)}if([4].indexOf(this.calendarMode)!==-1&&j.length>0){p=this.dayDiff(g,b);g.setHours(0,0,0,0);b.setHours(0,0,0,0);for(o=0;o<j.length;o++){m=new Date(j[o]);m.setHours(0,0,0,0);if(!(p<=
1))if(m>g&&m<b)return false}}if([7,8].indexOf(this.calendarMode)!==-1)return true;if(!a)return false;if([5].indexOf(this.calendarMode)!==-1&&h===i)s=false;for(g=this.parseDate(a);g<=b;g.setDate(g.getDate()+1)){g.getDay();h=this.toYMD(g);++n;if(d.indexOf(h)!==-1||n>1&&h!=i&&l.indexOf(h)!==-1){s=false;break}}if(this.calendarMode===5){if(q)q+=1;if(r)r+=1}if(this.dayCountMode===1){if(n===1)return false;++q;r>0&&++r}if(q&&n<q||r&&n>r)return false;return s};e.calendar.prototype.beforeShowDay=function(a,
b,d){var g=a.getDay(),h=this.toYMD(a),i=new Date,l=true,j="",m=this.startDateSelected?this.parseDate(this.startDateSelected):null,n=this.endDateSelected?this.parseDate(this.endDateSelected):null,s=d===0?this.startHalfDays.start:this.endHalfDays.start,q=d===0?this.endHalfDays.end:this.endHalfDays.end,r=d===0?this.startCurrentMonthExclusions:this.endCurrentMonthExclusions,p=d===0?this.startCheckoutWeekdayList:this.endCheckoutWeekdayList,o=d===0?this.endCheckinWeekdayList:this.endCheckinWeekdayList,
u=d===0?this.startBookedAvailabilityList:this.endBookedAvailabilityList,t=d===0?this.startBookedOutDays:this.endBookedOutDays,v;if(g===0)g=7;if(t.length>0)for(v=0;v<t.length;v++)r.indexOf(t[v])===-1&&r.push(t[v]);i.setHours(0,0,0,0);this.createUniqueCalendar();if(d===1&&[3,4,5].indexOf(this.calendarMode)!==-1)if(!this.validateDateRange(this.startDateSelected,a,1))return[false,"calendarista-unavailable"];if(s.indexOf(h)!==-1&&d===0)return[false,"calendarista-unavailable calendarista-halfday-start"];
else if(q.indexOf(h)!==-1&&d===1)return[false,"calendarista-unavailable calendarista-halfday-end"];if(r.indexOf(h)!==-1){l=false;j="calendarista-unavailable"}else if(d===0&&p.indexOf(g)!==-1||d===1&&o.indexOf(g)!==-1){l=false;j="calendarista-selectedday-range"}else{if(s.indexOf(h)!==-1||[3,4,5,7].indexOf(this.calendarMode)!==-1&&m&&a.getTime()==m.getTime()){if(this.calendarMode!==7){j="calendarista-selectedday-range";if(this.calendarMode===5)j+=" calendarista-halfday-start"}if([3,7].indexOf(this.calendarMode)!==
-1&&d===1)if(!(d===1&&[0,1].indexOf(this.bookingDaysMinimum)!==-1&&this.calendarMode===3))return[false,j]}else if(q.indexOf(h)!==-1||this.calendarMode===5&&n&&a.getTime()==n.getTime())j="calendarista-selectedday-range calendarista-halfday-end";if(h===b)j+=" calendarista-selectedday";else if(a.getTime()==i.getTime())j+=" calendarista-current";if(!l||a<i){j="calendarista-unavailable";l=false}else j||(j="calendarista-available");if(m&&n&&[3,4,5].indexOf(this.calendarMode)!==-1)if(a.getTime()>=m.getTime()&&
a.getTime()<=n.getTime())j+=" calendarista-selectedday-range"}if([4].indexOf(this.calendarMode)!==-1&&u.indexOf(h)!==-1)j+=" calendarista-range-unavailable";return[l,j]};e.calendar.prototype.startDateBeforeShowDay=function(a){var b=this.startDateSelected?this.toYMD(this.parseDate(this.startDateSelected)):null;return this.beforeShowDay(a,b,0)};e.calendar.prototype.endDateBeforeShowDay=function(a){var b=this.endDateSelected?this.toYMD(this.parseDate(this.endDateSelected)):null;this.$startDate.length>
0&&!this.$startDate.is(":disabled")&&this.$startDate.prop("disabled",true);b||(b=this.startDateSelected?this.toYMD(this.parseDate(this.startDateSelected)):null);return this.beforeShowDay(a,b,1)};e.calendar.prototype.onChangeMonthYearStartDate=function(a,b,d){if(typeof d.lastVal!="undefined"){a=this.getCalendarModelByMonth(a,b);a.push({name:"requestBy",value:0});this.calendarStateToggle();this.ajax.request(this,this.monthYearStartDateResponse,f.param(a))}};e.calendar.prototype.monthYearStartDateResponse=
function(a){this.monthYearResponse(a)};e.calendar.prototype.onChangeMonthYearEndDate=function(a,b){var d=this.getCalendarModelByMonth(a,b);d.push({name:"requestBy",value:1});this.calendarStateToggle();this.ajax.request(this,this.monthYearEndDateResponse,f.param(d))};e.calendar.prototype.monthYearEndDateResponse=function(a){this.monthYearResponse(a);this.costSummaryRequest(true)};e.calendar.prototype.calendarStateToggle=function(){window.setTimeout(function(){f(".ui-datepicker-calendar a").parent().addClass("ui-datepicker-unselectable ui-state-disabled calendarista-unavailable");
f(".ui-datepicker-prev").addClass("ui-state-disabled").off();f(".ui-datepicker-next").addClass("ui-state-disabled").off()},10)};e.calendar.prototype.monthYearResponse=function(a){a=window.JSON.parse(a);if(a.requestBy==0){this.startDateMonthYearResponse(a);this.$startDate.datepicker("refresh")}else if(a.requestBy==1){this.endDateMonthYearResponse(a);this.$endDate.datepicker("refresh")}};e.calendar.prototype.startDateMonthYearResponse=function(a){var b;this.startCurrentMonthExclusions.length=0;this.startHalfDays.start.length=
0;this.startHalfDays.end.length=0;this.startCheckinWeekdayList.length=0;this.startCheckoutWeekdayList.length=0;this.startBookedAvailabilityList.length=0;this.startBookedOutDays.length=0;this.holidays.length=0;if(a.exclusions)this.startCurrentMonthExclusions=a.exclusions;if(a.holidays)this.holidays=a.holidays;if(this.appointment!==1){if(a.bookedOutDays)this.startBookedOutDays=a.bookedOutDays;if(a.halfDays){this.startHalfDays.start=a.halfDays.start;this.startHalfDays.end=a.halfDays.end}if(a.checkinWeekdayList)this.startCheckinWeekdayList=
a.checkinWeekdayList;if(a.checkoutWeekdayList)this.startCheckoutWeekdayList=a.checkoutWeekdayList;if(a.bookedAvailabilityList){this.startBookedAvailabilityList=a.bookedAvailabilityList;for(a=0;a<this.startBookedAvailabilityList.length;a++){b=this.startBookedAvailabilityList[a];this._startBookedAvailabilityList.indexOf(b)===-1&&this._startBookedAvailabilityList.push(b)}}}};e.calendar.prototype.endDateMonthYearResponse=function(a){var b,d;this.endCurrentMonthExclusions.length=0;this.endHalfDays.start.length=
0;this.endHalfDays.end.length=0;this.endCheckinWeekdayList.length=0;this.endCheckoutWeekdayList.length=0;this.endBookedAvailabilityList.length=0;this.endBookedOutDays.length=0;if(a.exclusions)this.endCurrentMonthExclusions=a.exclusions;if(a.bookedOutDays)for(b=0;b<a.bookedOutDays.length;b++){d=a.bookedOutDays[b];this.endBookedOutDays.indexOf(d)===-1&&this.endBookedOutDays.push(d)}if(a.halfDays){this.endHalfDays.start=a.halfDays.start;this.endHalfDays.end=a.halfDays.end}if(a.checkinWeekdayList)this.endCheckinWeekdayList=
a.checkinWeekdayList;if(a.checkoutWeekdayList)this.endCheckoutWeekdayList=a.checkoutWeekdayList;if(a.bookedAvailabilityList){this.endBookedAvailabilityList=a.bookedAvailabilityList;for(b=0;b<this.endBookedAvailabilityList.length;b++){d=this.endBookedAvailabilityList[b];this._endBookedAvailabilityList.indexOf(d)===-1&&this._endBookedAvailabilityList.push(d)}}};e.calendar.prototype.onStartDateSelect=function(a){var b=this.toTime(new Date),d=this.toYMD(this.parseDate(a)),g=[0,1,2,9,11,12].indexOf(this.calendarMode)!==
-1?d:this.$endDateField?this.$endDateField.val():d,h=this.$startTimeListbox?this.$startTimeListbox.val():-1,i=this.$root.find("a.calendarista-timeslot-deals .calendarista-timeslot-deals-selected time"),l=this.$root.find('input[name="repeatAppointment"]');if(i.length>0)h=parseInt(i.attr("data-calendarista-value"),10);h=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"selectedDate",value:d},{name:"selectedStartTime",value:h},{name:"sameDay",value:false},
{name:"clientTime",value:b},{name:"searchResultStartTime",value:this.searchResultStartTime},{name:"timezone",value:this.timezone},{name:"calendarMode",value:this.calendarMode},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionStartDaySelected},{name:"calendarista_nonce",value:c.nonce}];if(l.length>0){l.prop("checked",false);this.resetRepeat=true}this.$startDate.parsley().reset();
this._startDateVal=a;this.$clientStartDateField.val("");[11].indexOf(this.calendarMode)!==-1&&this.insertMultiDate(d);g==d&&this.searchResultEndTime&&h.push({name:"searchResultEndTime",value:this.searchResultEndTime});if(!(this.endDateSelected&&!this.validateDateRange(a,this.endDateSelected,0))){this.currentTime=b;this.$startDateField.val(d);this.$endDate.length===0&&this.$endDateField.val(d);if(this.timeslotCalendarModes.indexOf(this.calendarMode)!==-1){this.ajax.request(this,this.startDayResponse,
f.param(h));this.calendarMode===2&&this.$endDateField.val(d)}if([0,11].indexOf(this.calendarMode)!==-1||[7].indexOf(this.calendarMode)!==-1&&this.returnOptional)this.seatsRequest()}};e.calendar.prototype.startDayResponse=function(a){var b,d,g=this.$startDateField.val(),h=[0,1,2,9,11,12].indexOf(this.calendarMode)!==-1?g:this.$endDateField?this.$endDateField.val():g,i=this.$endTimeListbox?this.$endTimeListbox.val():-1;g=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},
{name:"selectedDate",value:g},{name:"selectedEndTime",value:i},{name:"sameDay",value:h==g},{name:"searchResultEndTime",value:this.searchResultEndTime},{name:"clientTime",value:this.currentTime},{name:"timezone",value:this.timezone},{name:"calendarMode",value:this.calendarMode},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionEndDaySelected},{name:"calendarista_nonce",value:c.nonce}];
this.$startTimeListbox&&this.$startTimeListbox.off();this.$startTimeDeals&&this.$startTimeDeals.off();this.$startTimeReset&&this.$startTimeReset.off();this.$startTimeslotPlaceHolder.removeClass("hide");this.$startTimeslotPlaceHolder.replaceWith(a);this.$startTimeslotPlaceHolder=this.$root.find(".calendarista-start-timeslot-placeholder");if(this.timeDisplayMode===1&&[1,9,12].indexOf(this.calendarMode)!==-1){this.$startTimeDeals=this.$root.find("a.calendarista-timeslot-deals");b=this.$root.find("a.calendarista-timeslot-deals .calendarista-timeslot-deals-selected time");
this.onStartTimeDealClickedDelegate=e.createDelegate(this,this.onStartTimeDealClicked);this.$startTimeDeals.on("click",this.onStartTimeDealClickedDelegate);d=this.$root.find('input[name="startTime"]')}this.$startTimeListbox=this.$root.find('select[name="startTime"]');if(this.$startTimeListbox.length===0)this.$startTimeListbox=this.$root.find('select[name="startTime[]"]');this.$startTimeReset=this.$root.find(".calendarista-starttime-reset");this.$startTimeListbox.on("change",e.createDelegate(this,
this.onStartTimeSelected));this.$startTimeReset.on("click",e.createDelegate(this,this.timeResetClick));if(!this.validateTimeslots(this.$startTimeListbox,0)){this.setStartDate(null);this.$startDateField.val("");this._startDateVal=null}this.$startTimeListbox.is("[multiple]")&&this.disableOutOfStockListItems(this.$startTimeListbox);if(this.$startTimeListbox.length>0&&this.$startTimeListbox[0].selectedIndex>0||d&&d.length>0&&d.val())[1,2,9].indexOf(this.calendarMode)!==-1&&this.repeatRequest();[8].indexOf(this.calendarMode)!==
-1&&this.returnSameDay&&this.requestEndTimeslots();this.timeslotCalendarModes.indexOf(this.calendarMode)!==-1&&this.calendarMode===2&&this.ajax.request(this,this.endDayResponse,f.param(g));if([0,4,11].indexOf(this.calendarMode)!==-1)this.costSummaryRequest(true);else if([1,8,9,12].indexOf(this.calendarMode)!==-1)if(this.$startTimeListbox.length>0&&this.$startTimeListbox[0].selectedIndex>0)this.seatsRequest({name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)});
else b&&b.length>0?this.seatsRequest({name:"startTime",value:parseInt(b.attr("data-calendarista-value"),10)}):this.seatsResponse("")};e.calendar.prototype.seatsRequest=function(a){var b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"startDate",value:this.$startDateField.val()},{name:"endDate",value:this.$endDateField.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},
{name:"action",value:this.actionSeats},{name:"calendarista_nonce",value:c.nonce}];if(isNaN(this.projectId)||isNaN(this.availabilityId))return false;if(a)b=b.concat(a);this.$availabilities&&this.$availabilities.length>0&&this.$availabilities.prop("checked",false);this.ajax.request(this,this.seatsResponse,f.param(b))};e.calendar.prototype.seatsResponse=function(a){this.$seats&&this.$seats.length>0&&this.$seats.off();this.$seatsPlaceholder.html(a);this.$seats=this.$root.find('select[name="seats"]');
this.$seatsMaximum=this.$root.find('input[name="seatsMaximum"]');if(this.$seats.length===0)this.$seats=this.$root.find('input[name="seats"]');this.bookMoreRequest();this.$seats.on("change",e.createDelegate(this,this.seatSelectionChanged));[0,1,2,3,4,5,6,7,9,11,12,8].indexOf(this.calendarMode)!==-1&&this.costSummaryRequest(true)};e.calendar.prototype.dynamicFieldsRequest=function(){var a=this.$seats?this.$seats.val():0,b=this.$seatsMaximum.length>0?parseInt(this.$seatsMaximum.val(),10):0;a=[{name:"projectId",
value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"seats",value:a},{name:"seatsMax",value:b},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionDynamicFields},{name:"calendarista_nonce",value:c.nonce}];if((b=this.$dynamicFieldsCount.val())&&parseInt(b,10)>0){this.ajax.request(this,this.dynamicFieldsResponse,f.param(a));return true}return false};e.calendar.prototype.dynamicFieldsResponse=
function(a){this.$dynamicFields&&this.$dynamicFields.off();this.$dynamicFieldsPlaceholder.html(a);this.$dynamicFields=this.$root.find(".calendarista-dynamicfield");this.$dynamicFields.on("change",e.createDelegate(this,this.dynamicFieldChange));this.costSummaryRequest()};e.calendar.prototype.dynamicFieldChange=function(a){var b=f(a.currentTarget);a=b.prop("id");b=parseInt(b.attr("data-calendarista-limit"),10);b=this.$seatsMaximum.length>0&&b?parseInt(this.$seatsMaximum.val(),10):0;var d=0,g,h,i,l,
j,m;if(this.$seats.length>0&&this.$seats[0].type==="select-one")b=parseInt(this.$seats.val(),10);if(this.$dynamicFields.length>1)for(h=0;h<this.$dynamicFields.length;h++){i=f(this.$dynamicFields[h]);if(m=parseInt(i.val(),10))d+=m}if(b)for(h=0;h<this.$dynamicFields.length;h++){i=f(this.$dynamicFields[h]);if(i.prop("id")!=a){g=i.val()?parseInt(i.val(),10):0;l=i.find("option");for(i=0;i<l.length;i++){j=f(l[i]);m=j.val()?parseInt(j.val(),10):0;if(m>g&&b-d<m)this.disableOption(j);else if(j.is(":disabled")){j.prop("disabled",
false);j.html(j.attr("data-calendarista-value"))}}}}this.costSummaryRequest()};e.calendar.prototype.bookMoreRequest=function(a){var b;if(this.$bookMorePlaceholder.length!==0){(b=this.$seats?this.$seats.val():1)||(b=1);b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"seats",value:b},{name:"startDate",value:this.$startDateField.val()},{name:"endDate",value:this.$endDateField.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",
value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionBookMore},{name:"calendarista_nonce",value:c.nonce}];if(!a){this.$startTimeListbox&&this.$startTimeListbox.length>0&&this.$startTimeListbox.find("option:selected").val()&&b.push({name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)});this.$endTimeListbox&&this.$endTimeListbox.length>0&&this.$endTimeListbox.find("option:selected").val()&&b.push({name:"endTime",
value:parseInt(this.$endTimeListbox.find("option:selected").val(),10)})}if(isNaN(this.projectId)||isNaN(this.availabilityId))return false;if(a)b=b.concat(a);this.ajax.request(this,this.bookMoreResponse,f.param(b))}};e.calendar.prototype.bookMoreResponse=function(a){this.$availabilities&&this.$availabilities.length>0&&this.$availabilities.off();this.$bookMorePlaceholder.html(a);this.$availabilities=this.$root.find('input[name="availabilities[]"]');this.$availabilities.on("change",e.createDelegate(this,
this.bookMoreSelectionChanged));this.costSummaryRequest(true)};e.calendar.prototype.bookMoreSelectionChanged=function(){this.costSummaryRequest(true)};e.calendar.prototype.repeatRequest=function(a){var b;if([0,1,2,9].indexOf(this.calendarMode)!==-1)if(this.$repeatPlaceholder.length!==0){b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"availableDate",value:this.$startDateField.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",
value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionRepeat},{name:"calendarista_nonce",value:c.nonce}];this.resetRepeat&&b.push({name:"resetRepeat",value:1});if(isNaN(this.projectId)||isNaN(this.availabilityId))return false;if(a)b=b.concat(a);this.ajax.request(this,this.repeatResponse,f.param(b))}};e.calendar.prototype.repeatResponse=function(a){this.$repeatPlaceholder.html(a);a=this.$root.find('input[name="___viewstate"]');a.length>0&&this.$viewState.val(a.val())};
e.calendar.prototype.getRepeatAppointmentModel=function(){var a=[],b=this.$root.find('input[name="repeatAppointment"]'),d=this.$root.find('select[name="repeatFrequency"]'),g=this.$root.find('select[name="repeatInterval"]'),h=this.$root.find('select[name="terminateAfterOccurrence"]'),i=this.$root.find('input[name="repeatWeekdayList[]"]:checked'),l=this.$root.find('input[name="repeatFrequency"]'),j=this.$root.find('input[name="repeatInterval"]'),m=this.$root.find('input[name="terminateAfterOccurrence"]');
b=b.is(":checked");this.$root.find('input[name="repeatAppointmentDates[]"]');g=g.length>0?g.val():j.val();d=d.length>0?d.val():l.val();h=h.length>0?h.val():m.val();m=[];if(b){if(i.length>0)m=i.map(function(){return f(this).val()}).get();a=[{name:"repeatAppointment",value:1},{name:"repeatInterval",value:g},{name:"repeatFrequency",value:d},{name:"terminateAfterOccurrence",value:h}];if(m.length>0)a=a.concat([{name:"repeatWeekdayList",value:m}])}return a};e.calendar.prototype.getCostSummaryModel=function(){var a=
f("#"+this.id).find('input[name="postbackStep"]'),b=this.$startTimeListbox?this.$startTimeListbox.val():"",d=this.$startDateField?this.$startDateField.val():"",g=this.$endTimeListbox?this.$endTimeListbox.val():"",h=this.$endDateField?this.$endDateField.val():"",i=this.$seats?this.$seats.val():"",l=this.$multiDateSelection.val(),j;j=this.$root.find("a.calendarista-timeslot-deals .calendarista-timeslot-deals-selected time");var m,n=[];if(j.length>0)b=parseInt(j.attr("data-calendarista-value"),10);switch(this.calendarMode){case 1:case 8:if(!b){this.costSummaryReset();
return false}break;case 2:case 4:if(!b||!g){this.costSummaryReset();return false}break;case 3:case 5:if(!d||!h){this.costSummaryReset();return false}}if(b instanceof Array){if(b.length>1){g=b[b.length-1];h=d}b=b[0]}if(this.$availabilities&&this.$availabilities.length>0)for(j=0;j<this.$availabilities.length;j++){m=f(this.$availabilities[j]);m.is(":checked")&&n.push(parseInt(m.val(),10))}a=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",
value:this.appointment},{name:"availableDate",value:d},{name:"multiDateSelection",value:l},{name:"startTime",value:b},{name:"endDate",value:h},{name:"endTime",value:g},{name:"seats",value:i},{name:"calendarMode",value:this.calendarMode},{name:"timezone",value:this.timezone},{name:"availabilities",value:n.join(",")},{name:"postbackStep",value:a.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"action",value:this.actionCostSummary},{name:"calendarista_nonce",value:c.nonce}];if(this.$dynamicFields&&
this.$dynamicFields.length>0)for(j=0;j<this.$dynamicFields.length;j++)a.push({name:this.$dynamicFields[j].name,value:this.$dynamicFields[j].value});b=this.getRepeatAppointmentModel();if(b.length>0)a=a.concat(b);this.resetRepeat&&a.push({name:"resetRepeat",value:1});return a};e.calendar.prototype.mapCostSummaryRequest=function(a){var b=this.getCostSummaryModel();if(b){a=b.concat(a);this.$costSummaryPlaceholder=f("#"+this.id).find(".calendarista-cost-summary-placeholder");(function(d,g){window.setTimeout(function(){g.ajax.request(g,
g.costSummaryResponse,f.param(d))},10)})(a,this)}};e.calendar.prototype.seatSelectionChanged=function(){this.$bookMorePlaceholder.length===0?this.costSummaryRequest(true):function(a){window.setTimeout(function(){a.bookMoreRequest()},10)}(this)};e.calendar.prototype.costSummaryRequest=function(a,b){var d=this.getCostSummaryModel(),g=this.$root.find(".calendarista-multi-date-btn"),h=this.$root.find(".calendarista-repeat-date-btn");if(!d)return false;if(b)d=d.concat(b);if(a===true&&this.dynamicFieldsRequest())return false;
g.off();h.off();(function(i,l){window.setTimeout(function(){l.ajax.request(l,l.costSummaryResponse,f.param(i))},10)})(d,this)};e.calendar.prototype.costSummaryResponse=function(a){this.$costSummaryPlaceholder.html(a);a=this.$costSummaryPlaceholder.find(".calendarista-multi-date-btn");if(a.length>0){this.multiDateButtonClickDelegate=e.createDelegate(this,this.removeDateClickHandler);a.on("click",this.multiDateButtonClickDelegate)}a=this.$costSummaryPlaceholder.find(".calendarista-repeat-date-btn");
if(a.length>0){this.repeatDateButtonClickDelegate=e.createDelegate(this,this.removeRepeatDateClickHandler);a.on("click",this.repeatDateButtonClickDelegate)}a=this.$costSummaryPlaceholder.find(".calendarista-repeat-show-more-btn");if(a.length>0){this.repeatShowMoreButtonClickDelegate=e.createDelegate(this,this.repeatShowMoreClickHandler);a.on("click",this.repeatShowMoreButtonClickDelegate)}this.resetRepeat=false};e.calendar.prototype.costSummaryReset=function(){this.$costSummaryPlaceholder.html("")};
e.calendar.prototype.validateTimeslots=function(a,b){var d=a.find("option:not([disabled])"),g=this.$startTimeListbox&&this.$startTimeListbox.is("[multiple]"),h=this.$startTimeDeals&&this.$startTimeDeals.length>0,i=b&&this.returnSameDay?this.$timeslotsReturnError:this.$timeslotsError;if(a.length===0&&!h){i.removeClass("hide");return false}if(h){i.addClass("hide");return true}this.adjustStartTime();this.adjustEndTime();if(a.prop("type")==="hidden"||!g&&d.length===1){i.removeClass("hide");return false}i.addClass("hide");
return true};e.calendar.prototype.validateTimeRange=function(){var a=this.$startTimeListbox?this.$startTimeListbox.find(":selected"):null,b=this.$endTimeListbox?this.$endTimeListbox.find(":selected"):null,d,g,h,i;if(!this.minTime&&!this.maxTime)return true;if(!a||!b)return true;d=parseInt(a.attr("data-calendarista-hour"),10);a=parseInt(a.attr("data-calendarista-minute"),10);g=parseInt(b.attr("data-calendarista-hour"),10);b=parseInt(b.attr("data-calendarista-minute"),10);if(!isNaN(d)&&!isNaN(a)){h=
new Date;h.setHours(d,a,0)}if(!isNaN(g)&&!isNaN(b)){i=new Date;i.setHours(g,b,0)}if(h&&i){i<=h&&i.setDate(i.getDate()+1);d=i-h;d=Math.floor(d/6E4);if(this.minTime)if(d<this.minTime){this.$minTimeError.val("");this.$minTimeError.parsley().validate();return false}else{this.$minTimeError.val("-1");this.$minTimeError.parsley().reset()}if(this.maxTime)if(d>this.maxTime){this.$maxTimeError.val("");this.$maxTimeError.parsley().validate();return false}else{this.$maxTimeError.val("-1");this.$maxTimeError.parsley().reset()}}else{this.$minTimeError.val("-1");
this.$minTimeError.parsley().reset();this.$maxTimeError.val("-1");this.$maxTimeError.parsley().reset()}return true};e.calendar.prototype.disableOutOfStockListItems=function(a){var b,d;if(a.is("[multiple]")){b=a.find("option");for(a=0;a<b.length;a++){d=f(b[a]);d[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(d)}}};e.calendar.prototype.onStartTimeSelected=function(){var a,b,d,g,h=0,i,l,j=false,m=[],n=this.$root.find('input[name="repeatAppointment"]');if(this.$endTimeListbox){a=
this.$endTimeListbox.find("option:selected");a=a.val()}this.adjustStartTime();this.adjustEndTime();this.validateTimeRange();if([1,2,9,12].indexOf(this.calendarMode)!==-1){if(this.$startTimeListbox.is("[multiple]")){i=parseInt(this.$startTimeListbox.attr("data-calendarista-max-timeslots"),10);a=this.$startTimeListbox.find("option");d=this.$startTimeListbox.find("option:selected").map(function(){return this.index}).get();for(g=0;g<a.length;g++){b=f(a[g]);b.prop("selected",false);(l=b[0].hasAttribute("data-calendarista-outofstock"))&&
this.disableOption(b);if(g>=d[0]&&g<=d[d.length-1])if(j||i&&h>=i||l)j||(j=l);else{b.prop("selected",true);m.push(b[0]);++h}}window[this.callbackTimeslotSelected]&&window[this.callbackTimeslotSelected](m)}if([1,2,9].indexOf(this.calendarMode)!==-1){if(n.length>0){n.prop("checked",false);this.resetRepeat=true}this.repeatRequest()}if([1,9,12].indexOf(this.calendarMode)!==-1){h=parseInt(this.$startTimeListbox.find("option:selected").val(),10);this.insertMultiDateTime(h);this.seatsRequest([{name:"startTime",
value:h}])}else this.costSummaryRequest(true)}else if([4,8].indexOf(this.calendarMode)!==-1)if(a||this.returnOptional)this.seatsRequest([{name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)}]);else this.$bookMorePlaceholder.length>0&&a?this.bookMoreRequest():this.costSummaryRequest(true)};e.calendar.prototype.onStartTimeDealClicked=function(a){a.preventDefault();var b=f(a.currentTarget).find("time");b=parseInt(b.attr("data-calendarista-value"),10);var d=this.$root.find('input[name="startTime"]'),
g=this.$root.find('input[name="repeatAppointment"]');d.val(b);this.$startTimeDeals.find(".calendarista-timeslot-deals-tile").removeClass("calendarista-timeslot-deals-selected");f(a.currentTarget).find(".calendarista-timeslot-deals-tile").addClass("calendarista-timeslot-deals-selected");d.parsley().reset();this.insertMultiDateTime(b);window[this.callbackTimeslotSelected]&&window[this.callbackTimeslotSelected]([d[0]]);if(g.length>0){g.prop("checked",false);this.resetRepeat=true}this.repeatRequest();
this.seatsRequest([{name:"startTime",value:b}])};e.calendar.prototype.insertMultiDate=function(a){var b=this.$multiDateSelection.val(),d=this.bookingDaysMaximum;if([11].indexOf(this.calendarMode)!==-1&&a){b=b?b.split(";"):[];if((!d||b.length<d)&&b.indexOf(a)===-1)b.push(a);b=b.join(";");this.$multiDateSelection.val(b);this.datepickerReset(false)}return this.$multiDateSelection.val()};e.calendar.prototype.insertMultiDateTime=function(a){var b=this.$multiDateSelection.val(),d=this.$startDateField.val(),
g=d+":"+a,h=this.bookingDaysMaximum;if([12].indexOf(this.calendarMode)!==-1&&a){b=b?b.split(";"):[];if(!h||b.length<h){a=this.inArray(b,d);if(a!==-1&&b.indexOf(g)===-1)b.splice(a,1,g);else b.indexOf(g)===-1&&b.push(g);b=b.join(";");this.$multiDateSelection.val(b);this.datepickerReset(false)}}return this.$multiDateSelection.val()};e.calendar.prototype.inArray=function(a,b){var d;if(a)for(d=0;d<a.length;d++)if(a[d].indexOf(b)!==-1)return d;return-1};e.calendar.prototype.removeDateClickHandler=function(a){var b=
f(a.currentTarget).attr("data-calendarista-value");if(a=this.$multiDateSelection.val()){a=a.split(";");b=a.indexOf(b);b!==-1&&a.splice(b,1);this.$multiDateSelection.val(a.join(";"));this.datepickerReset(false);this.costSummaryRequest(true)}};e.calendar.prototype.removeRepeatDateClickHandler=function(a){a=f(a.currentTarget).attr("data-calendarista-value");var b=f("#"+a);a=[];var d;if(b){b.remove();b=this.$root.find('input[name="repeatAppointmentDates[]"]').map(function(){return f(this).val()}).get();
if(b.length>0)for(d=0;d<b.length;d++)a.push({name:"repeatAppointmentDates[]",value:b[d]});this.costSummaryRequest(false,a)}};e.calendar.prototype.repeatShowMoreClickHandler=function(a){a=f(a.currentTarget).attr("data-calendarista-value");a=f("#"+a);var b=this.$costSummaryPlaceholder.find(".calendarista-repeat-date-badge.hide"),d;if(b.length>0)for(d=0;d<=b.length;d++){if(d>=this.repeatPageSize)break;f(b[d]).removeClass("hide")}b=this.$costSummaryPlaceholder.find(".calendarista-repeat-date-badge.hide");
b.length===0&&a.length>0&&a.hide()};e.calendar.prototype.adjustEndTime=function(){if(!(this.endDateSelected&&this.startDateSelected!==this.endDateSelected&&this.calendarMode!==2)){var a,b=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox[0].selectedIndex:0,d=this.$endTimeListbox&&this.$endTimeListbox.length>0?this.$endTimeListbox.find("option"):null,g;if(d){d.prop("disabled",false);for(a=0;a<d.length;a++){g=f(d[a]);a>0&&a<b?this.disableOption(g):g.html(g.attr("data-calendarista-time"))}}this.$endTimeListbox&&
this.disableTimeResetButtons(this.$endTimeListbox);this.filterOutOfStockSlots()}};e.calendar.prototype.filterOutOfStockSlots=function(){var a,b,d=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox.find("option"):null,g=this.$endTimeListbox&&this.$endTimeListbox.length>0?this.$endTimeListbox.find("option"):null,h=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox[0].selectedIndex:0,i=(a=h?this.$startTimeListbox[0].options[h]:null)?f(a).attr("data-calendarista-24h"):
null,l=d?d.filter("[data-calendarista-outofstock]"):null,j=-1,m=-1,n=this.startDateSelected==this.endDateSelected||!this.endDateSelected,s=true,q;if([1,9].indexOf(this.calendarMode)!==-1&&!this.$startTimeListbox.is("[multiple]"))s=false;if(d){if(s&&!n&&[2,4].indexOf(this.calendarMode)!==-1&&l&&l.length>0)j=n?l[0].index:l[l.length-1].index;for(a=0;a<d.length;a++){b=f(d[a]);if(a>0&&j!==-1&&a<j)this.disableOption(b);else b[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(b)}}if(g){if(s){if(!n||
l&&l.length===0)l=g?g.filter("[data-calendarista-outofstock]"):null;if(l&&l.length>0)m=n?l[l.length-1].index:l[0].index}if([8].indexOf(this.calendarMode)!==-1)for(a=0;a<g.length;a++){b=f(g[a]);n&&i&&b[0].hasAttribute("data-calendarista-return-trip")&&i>=b.attr("data-calendarista-24h")&&this.disableOption(b);b[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(b)}else{for(a=0;a<g.length;a++){b=f(g[a]);if(m!==-1)if(h<=m&&a>=m)this.disableOption(b);else!n&&l.length>0&&a>=l[l.length-
1].index&&this.disableOption(b)}if(n&&m!==-1&&h<m)for(a=h;a<m;a++){b=f(g[a]);if(!q&&b[0].hasAttribute("data-calendarista-outofstock")){q=true;if(h!==0)continue}q&&this.disableOption(b)}}}};e.calendar.prototype.disableOption=function(a){if(!a.is(":disabled")){a.prop("disabled",true);a.prop("selected",false);a.html(a.html().replace(/\d/g,function(b){return b+"\u0336"}))}};e.calendar.prototype.onEndDateSelect=function(a){this.toTime(new Date);var b=this.toYMD(this.parseDate(a)),d=this.$startDateField?
this.$startDateField.val():"";this.$startTimeListbox&&this.$startTimeListbox.val();var g=this.$endTimeListbox?this.$endTimeListbox.val():-1;this.$viewState.val();this.$cart.val();d=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",value:this.appointment},{name:"selectedDate",value:b},{name:"selectedEndTime",value:g},{name:"sameDay",value:d==b},{name:"searchResultEndTime",value:this.searchResultEndTime},{name:"clientTime",value:this.currentTime},
{name:"calendarMode",value:this.calendarMode},{name:"timezone",value:this.timezone},{name:"__viewstate",value:this.$viewState.val()},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionEndDaySelected},{name:"calendarista_nonce",value:c.nonce}];this.$endDate.parsley().reset();this._endDateVal=a;this.$clientEndDateField.val("");if(!this.endDateSelected&&!this.validateDateRange(this.startDateSelected,a,1))this.datepickerReset();else{this.$endDateField.val(b);if([4,8].indexOf(this.calendarMode)!==
-1)(function(h,i){window.setTimeout(function(){i.ajax.request(i,i.endDayResponse,f.param(h))},10)})(d,this);else[3,7,5].indexOf(this.calendarMode)!==-1&&this.seatsRequest()}};e.calendar.prototype.requestEndTimeslots=function(){this.toTime(new Date);var a=this.$startDateField?this.$startDateField.val():"",b=this.$endTimeListbox?this.$endTimeListbox.val():-1;b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",value:this.appointment},{name:"selectedDate",
value:a},{name:"selectedEndTime",value:b},{name:"sameDay",value:true},{name:"searchResultEndTime",value:this.searchResultEndTime},{name:"clientTime",value:this.currentTime},{name:"calendarMode",value:this.calendarMode},{name:"timezone",value:this.timezone},{name:"__viewstate",value:this.$viewState.val()},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionEndDaySelected},{name:"calendarista_nonce",value:c.nonce}];this._endDateVal=a;this.$clientEndDateField.val("");this.$endDateField.val(a);
(function(d,g){window.setTimeout(function(){g.ajax.request(g,g.endDayResponse,f.param(d))},10)})(b,this)};e.calendar.prototype.endDayResponse=function(a){this.$endTimeListbox&&this.$endTimeListbox.off();this.$endTimeReset&&this.$endTimeReset.off();this.$endTimeslotPlaceHolder.removeClass("hide");this.$endTimeslotPlaceHolder.replaceWith(a);this.$endTimeslotPlaceHolder=this.$root.find(".calendarista-end-timeslot-placeholder");this.$endTimeListbox=this.$root.find('select[name="endTime"]');if(this.$endTimeListbox.length===
0)this.$endTimeListbox=this.$root.find('select[name="endTime[]"]');this.$endTimeReset=this.$root.find(".calendarista-endtime-reset");this.$endTimeListbox.on("change",e.createDelegate(this,this.onEndTimeSelected));this.$endTimeReset.on("click",e.createDelegate(this,this.timeResetClick));if(!this.validateTimeslots(this.$endTimeListbox,1)){this.setEndDate(null);this.$endDateField.val("");this._endDateVal=null;if(this.returnSameDay&&!this.returnOptional){this.setStartDate(null);this.$startDateField.val("");
this._startDateVal=null}}if([2,4,8].indexOf(this.calendarMode)!==-1)if(this.$endTimeListbox.length>0&&this.$endTimeListbox[0].selectedIndex>0){this.seatsRequest([{name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)},{name:"endTime",value:parseInt(this.$endTimeListbox.find("option:selected").val(),10)}]);return}this.calendarMode===2&&this.repeatRequest()};e.calendar.prototype.onEndTimeSelected=function(){this.adjustStartTime();this.validateTimeRange();window[this.callbackTimeslotSelected]&&
window[this.callbackTimeslotSelected]([this.$startTimeListbox.find("option:selected")[0],this.$endTimeListbox.find("option:selected")[0]]);[2,4,8].indexOf(this.calendarMode)!==-1?this.seatsRequest([{name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)},{name:"endTime",value:parseInt(this.$endTimeListbox.find("option:selected").val(),10)}]):this.costSummaryRequest(true);[2].indexOf(this.calendarMode)!==-1&&this.repeatRequest()};e.calendar.prototype.adjustStartTime=
function(){if(!(this.startDateSelected!==this.endDateSelected&&this.calendarMode!==2)){var a,b=this.$endTimeListbox&&this.$endTimeListbox.length>0?this.$endTimeListbox[0].selectedIndex:0,d=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox.find("option"):null,g;if(d){d.prop("disabled",false);for(a=0;a<d.length;a++){g=f(d[a]);a>b&&b!==0?this.disableOption(g):g.html(g.attr("data-calendarista-time"))}}this.$startTimeListbox&&this.$startTimeListbox.length>0&&this.disableTimeResetButtons(this.$startTimeListbox)}this.filterOutOfStockSlots()};
e.calendar.prototype.timeResetClick=function(a){a.preventDefault();this.timeReset()};e.calendar.prototype.timeReset=function(){var a=this.$startTimeListbox?this.$startTimeListbox.find("option"):null,b=this.$endTimeListbox?this.$endTimeListbox.find("option"):null;if(a){a.prop("disabled",false);if(this.$startTimeListbox.length>0)this.$startTimeListbox[0].selectedIndex=0;this.resetTimeslot(a);if(b){b.prop("disabled",false);this.resetTimeslot(b);if(this.$endTimeListbox.length>0)this.$endTimeListbox[0].selectedIndex=
0}this.$startTimeReset.addClass("calendarista-not-active");this.$startTimeReset.prop("disabled",true);if(this.$endTimeReset){this.$endTimeReset.addClass("calendarista-not-active");this.$endTimeReset.prop("disabled",true)}this.filterOutOfStockSlots()}};e.calendar.prototype.resetTimeslot=function(a){if(a){var b,d;for(b=1;b<a.length;b++){d=f(a[b]);d.html(d.attr("data-calendarista-time"));d[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(d)}}};e.calendar.prototype.disableTimeResetButtons=
function(a){if(a.find("option[disabled]").length>0){if(this.$startTimeReset){this.$startTimeReset.removeClass("calendarista-not-active");this.$startTimeReset.prop("disabled",false)}if(this.$endTimeReset){this.$endTimeReset.removeClass("calendarista-not-active");this.$endTimeReset.prop("disabled",false)}}else{if(this.$startTimeReset){this.$startTimeReset.addClass("calendarista-not-active");this.$startTimeReset.prop("disabled",true)}if(this.$endTimeReset){this.$endTimeReset.addClass("calendarista-not-active");
this.$endTimeReset.prop("disabled",true)}}};e.calendar.prototype.dayDiff=function(a,b){var d;if(a instanceof Date&&!isNaN(a.valueOf())&&b instanceof Date&&!isNaN(b.valueOf())){d=Math.abs(b.getTime()-a.getTime());return Math.ceil(d/864E5)}return 0};e.calendar.prototype.toYMD=function(a){var b,d;if(a instanceof Date){b=a.getFullYear().toString();d=(a.getMonth()+1).toString();a=a.getDate().toString();return b+"-"+this.pad(d)+"-"+this.pad(a)}return""};e.calendar.prototype.toTime=function(a){var b=a.getHours();
a=this.pad(a.getMinutes());var d=b>=12?"pm":"am";b%=12;b=b?b:12;return b+":"+a+" "+d};e.calendar.prototype.parseDate=function(a){return f.datepicker.parseDate(this.dateFormat,a)};e.calendar.prototype.parseDateByFormat=function(a,b){return f.datepicker.parseDate(a,b)};e.calendar.prototype.pad=function(a){return("0"+a).slice(-2)};e.calendar.prototype.setStartDate=function(a){var b=null;if(a)b=this.parseDate(a);this.$startDate.length>0&&f.datepicker._setDate(f.datepicker._getInst(this.$startDate[0]),
b,true)};e.calendar.prototype.setEndDate=function(a){var b=null;if(a)b=this.parseDate(a);this.$endDate.length>0&&f.datepicker._setDate(f.datepicker._getInst(this.$endDate[0]),b,true)};e.calendar.prototype.unload=function(){this.$startTimeListbox&&this.$startTimeListbox.off();this.$endTimeListbox&&this.$endTimeListbox.off();this.$startTimeReset&&this.$startTimeReset.off();this.$endTimeReset&&this.$endTimeReset.off();this.$startDate.data("datepicker")!=null&&this.$startDate.datepicker("destroy");this.$endDate.data("datepicker")!=
null&&this.$endDate.datepicker("destroy");this.$projectsListbox.length&&this.$projectsListbox.off();this.$availabilityListbox.length&&this.$availabilityListbox.off();if(this._startBookedAvailabilityList.length)this._startBookedAvailabilityList.length=0;if(this._endBookedAvailabilityList.length)this._endBookedAvailabilityList.length=0;this.$packageListbox.length&&this.$packageListbox.off();this.$seats&&this.$seats.off();this.$dynamicFields&&this.$dynamicFields.length&&this.$dynamicFields.off();this.ajax&&
this.ajax.destroy();if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista,window.jstz,window.calendarista_wp_ajax);
(function(f,e,k){e.optionals=function(c){this.init(c);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.optionals.prototype.init=function(c){this.id=c.id;this.projectId=c.projectId;this.$root=f("#"+this.id);this.actionCostSummary="calendarista_cost_summary";this.ajaxUrl=k.url;this.ajax=new e.ajax({ajaxUrl:this.ajaxUrl,id:this.id});this.$costSummaryPlaceholder=this.$root.find(".calendarista-cost-summary-placeholder");this.$postbackStep=this.$root.find('input[name="postbackStep"]');
this.$viewstate=this.$root.find('input[name="__viewstate"]');this.$optionals=this.$root.find(".calendarista-optional");this.$incrementButtonsLeftMinus=this.$root.find(".calendarista-increment-left-minus");this.$incrementButtonsRightPlus=this.$root.find(".calendarista-increment-right-plus");this.$incrementButtonsLeftMinus.on("click",e.createDelegate(this,this.incrementLeftMinusClicked));this.$incrementButtonsRightPlus.on("click",e.createDelegate(this,this.incrementRightPlusClicked));this.$optionals.on("change",
e.createDelegate(this,this.optionalChanged));window.Parsley.addValidator("groupRequired",{requirementType:"string",validateNumber:function(a,b){var d=f(b),g;for(g=0;g<d.length;g++)if(parseInt(d[g].value,10)>0)return true;return false}});this.costSummary()};e.optionals.prototype.incrementLeftMinusClicked=function(c){c.preventDefault();c=f(c.currentTarget);c=f("#"+c.attr("data-calendarista-input"));var a=parseInt(c.attr("data-calendarista-min"),10),b=parseInt(c.val(),10);if(b>0&&b>a){c.val(b-1);this.costSummary()}e.wizard.isValid(this.$root)};
e.optionals.prototype.incrementRightPlusClicked=function(c){c.preventDefault();c=f(c.currentTarget);c=f("#"+c.attr("data-calendarista-input"));var a=parseInt(c.attr("data-calendarista-max"),10),b=parseInt(c.val(),10);if(b<a){c.val(b+1);this.costSummary()}e.wizard.isValid(this.$root)};e.optionals.prototype.optionalChanged=function(){this.costSummary()};e.optionals.prototype.costSummary=function(){var c;c=this.$root.find(".calendarista-optional:checked, .calendarista-optional option:selected").map(function(){return this.value}).get().join(",");
var a=this.$root.find("input.calendarista-incremental-input"),b=[{name:"optionals",value:c},{name:"action",value:this.actionCostSummary},{name:"projectId",value:this.projectId},{name:"postbackStep",value:this.$postbackStep.val()},{name:"calendarista_nonce",value:k.nonce},{name:"__viewstate",value:this.$viewstate.val()}];for(c=0;c<a.length;c++)b.push({name:a[c].id,value:a[c].value});this.ajax.request(this,this.costSummaryResponse,f.param(b))};e.optionals.prototype.costSummaryResponse=function(c){this.$costSummaryPlaceholder.html(c)};
e.optionals.prototype.unload=function(){this.$optionals.length&&this.$optionals.off();this.$incrementButtonsLeftMinus.length>0&&this.$incrementButtonsLeftMinus.off();this.$incrementButtonsRightPlus.length>0&&this.$incrementButtonsRightPlus.off();if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista,window.calendarista_wp_ajax);
(function(f,e,k){e.repeatAppointment=function(c){this.init(c);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.repeatAppointment.prototype.init=function(c){var a=this;this.id=c.id;this.$root=f("#calendarista_"+this.id);this.ajaxUrl=k.url;this.everyDaySummary=c.everyDaySummary;this.everyWeekOn=c.everyWeekOn;this.everyMonth=c.everyMonth;this.everyYear=c.everyYear;this.everyDayOfTheWeek=c.everyDayOfTheWeek;this.occurrenceTimes=c.occurrenceTimes;this.until=
c.until;this.justOnce=c.justOnce;this.su=c.su;this.mo=c.mo;this.tu=c.tu;this.we=c.we;this.th=c.th;this.fr=c.fr;this.sa=c.sa;this.availability=c.availabilityId;this.$repeatModeSummary=this.$root.find("#repeatModeSummary");this.$repeat=this.$root.find('input[name="repeatAppointment"]');this.$repeatOptions=this.$root.find("#calendarista_"+this.id+"_repeat_options");this.$repeatFrequencySelectList=this.$root.find('select[name="repeatFrequency"]');this.$repeatIntervalSelectList=this.$root.find('select[name="repeatInterval"]');
this.$terminateAfterOccurrenceSelectList=this.$root.find('select[name="terminateAfterOccurrence"]');this.$repeatIntervalRow=this.$root.find("#calendarista_"+this.id+"_repeatIntervalRow");this.$repeatWeekdayListRow=this.$root.find("#calendarista_"+this.id+"_repeatWeekdayListRow");this.$repeatWeekdayCheckboxList=this.$repeatWeekdayListRow.find('input[type="checkbox"]');this.$repeatFrequencyInput=this.$root.find('input[name="repeatFrequency"]');this.$repeatIntervalInput=this.$root.find('input[name="repeatInterval"]');
this.$terminateAfterOccurrenceInput=this.$root.find('input[name="terminateAfterOccurrence"]');this.$summary=this.$root.find("#calendarista_"+this.id+"_repeat_summary");this.$startDateField=this.$root.find('input[name="availableDate"]');this.costSummaryRequest="calendarista_cost_summary_request"+c.id;this.actionGetRepeatDates="calendarista_get_repeat_dates";this.repeatChangedDelegate=e.createDelegate(this,this.repeatChanged);this.$repeat.on("change",this.repeatChangedDelegate);this.$repeatWeekdayCheckboxList.on("change",
function(b){a.summaryRequest(b)});this.$repeatIntervalSelectList.on("change",function(b){a.summaryRequest(b)});this.$terminateAfterOccurrenceSelectList.on("change",function(b){a.summaryRequest(b)});this.repeatFrequencyChangedDelegate=e.createDelegate(this,this.repeatFrequencyChanged);this.$repeatFrequencySelectList.on("change",this.repeatFrequencyChangedDelegate);c=parseInt(this.$repeatFrequencySelectList.val(),10);this.$repeatWeekdayListRow.hide();this.$repeatWeekdayCheckboxList.prop("disabled",
true);if(c===5){this.$repeatWeekdayListRow.show();this.$repeatWeekdayCheckboxList.prop("disabled",false)}this.repeatChanged()};e.repeatAppointment.prototype.repeatChanged=function(c){var a=this.$repeat.is(":checked");c=c?true:false;a?this.$repeatOptions.show():this.$repeatOptions.hide();this.summaryRequest(c)};e.repeatAppointment.prototype.summaryRequest=function(c){var a=[];if(window[this.costSummaryRequest]){if(c)a=[{name:"repeatAppointmentChanged",value:1},{name:"resetRepeat",value:1},{name:"calendarista_nonce",
value:k.nonce}];window[this.costSummaryRequest](a)}};e.repeatAppointment.prototype.getRepeatDatesResponse=function(c){this.$summary.html(c)};e.repeatAppointment.prototype.mutuallyExclusive=function(c,a){f('input[name="'+a+'"]:checked').each(function(){var b=f(this);c.val()===b.val()&&b.prop("checked",false)})};e.repeatAppointment.prototype.repeatFrequencyChanged=function(c){var a=parseInt(this.$repeatFrequencySelectList.val(),10),b=parseInt(this.$repeatIntervalSelectList.val(),10);this.$repeatWeekdayListRow.hide();
this.$repeatWeekdayCheckboxList.prop("disabled",true);switch(a){case 1:this.everyDaySummary.replace("%s",b);break;case 5:this.$repeatWeekdayListRow.show();this.$repeatWeekdayCheckboxList.prop("disabled",false);this.getSelectedWeekdaySummary();break;case 6:this.everyMonth.replace("%s",b);break;case 7:this.everyYear.replace("%s",b)}this.setSummary();this.summaryRequest(c)};e.repeatAppointment.prototype.getSelectedWeekdaySummary=function(){var c,a,b=[],d,g=this.$repeatWeekdayListRow.find("input:checked"),
h=parseInt(this.$repeatIntervalSelectList.val(),10);for(c=0;c<g.length;c++){a=parseInt(f(g[c]).val(),10);switch(a){case 7:d=this.su;break;case 1:d=this.mo;break;case 2:d=this.tu;break;case 3:d=this.we;break;case 4:d=this.th;break;case 5:d=this.fr;break;case 6:d=this.sa}b.push(d)}if(b.length===7)return this.everyDayOfTheWeek.replace("%s",h);return this.everyWeekOn.replace("%s",h).replace("%s",b.join(","))};e.repeatAppointment.prototype.setSummary=function(){var c=parseInt(this.$repeatFrequencySelectList.val(),
10),a="",b=parseInt(this.$repeatIntervalSelectList.val(),10),d=parseInt(this.$terminateAfterOccurrenceSelectList.val(),10);switch(c){case 1:a=this.everyDaySummary.replace("%s",b);break;case 5:a=this.getSelectedWeekdaySummary();break;case 6:a=this.everyMonth.replace("%s",b);break;case 7:a=this.everyYear.replace("%s",b)}if(!isNaN(d)&&d!==0)if(d===1)a=this.justOnce;else a+=", "+this.occurrenceTimes.replace("%s",this.$terminateAfterOccurrenceSelectList.val());this.$summary.html(a)}})(window.jQuery,window.Calendarista,
window.calendarista_wp_ajax);
(function(f,e,k){e.checkout=function(c){this.init(c);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.checkout.prototype.init=function(c){this.id=c.id;this.projectId=c.projectId;this.ajaxUrl=k.url;this.$root=f("#"+this.id);this.actionCostSummary="calendarista_cost_summary";this.actionValidateCoupon="calendarista_coupon_validator";this.wooCommerceAction="calendarista_woocommerce_submit";this.ajax=new e.ajax({ajaxUrl:this.ajaxUrl,id:this.id});this.$bookNowButton=
this.$root.find('button[name="booknow"]');this.$costSummaryPlaceholder=this.$root.find(".calendarista-cost-summary-placeholder");this.$stagingId=this.$root.find('input[name="stagingId"]');this.$viewstate=this.$root.find('input[name="__viewstate"]');this.$paymentType=this.$root.find('input[name="paymentType"]');this.creditCardSection=this.$root.find("#collapse_creditcard_"+this.projectId);this.$coupon=this.$root.find('input[name="coupon"]');this.couponMinimumAmountError=this.$coupon.attr("data-calendarista-coupon-minimum-amount-error");
this.couponInvalidError=this.$coupon.attr("data-calendarista-coupon-invalid-error");this.$couponButton=this.$root.find('button[name="couponButton"]');this.$couponResetButton=this.$root.find('button[name="couponResetButton"]');this.$paymentOperatorForms=this.$root.find("form[data-calendarista-payment-operator]");this.$panels=this.$root.find(".calendarista-collapsable");this.$coupon.length>0&&this.$coupon.parsley().on("field:success",e.createDelegate(this,this.removeCouponError));this.$couponButton.on("click",
e.createDelegate(this,this.couponButtonClicked));this.$couponResetButton.on("click",e.createDelegate(this,this.resetCouponClicked));this.$paymentType.on("change",e.createDelegate(this,this.paymentTypeChanged))};e.checkout.prototype.resetCouponClicked=function(){var c;this.$coupon.val()&&this.$coupon.val("");this.resetTotal();this.costSummaryRequest();this.removeCouponError();c=this.$root.find('input[name="paymentMethod"]');if(c.is(":disabled")){c.prop("disabled",false);f(c[0]).prop("checked",true);
this.paymentLabelStatus(c,"show")}};e.checkout.prototype.removeCouponError=function(){this.$coupon.parsley().removeError("couponerror",{updateClass:true})};e.checkout.prototype.couponButtonClicked=function(){this.$coupon.val();var c;this.removeCouponError();c=this.$coupon.parsley?this.$coupon.parsley().validate():true;c!==null&&typeof c==="object"&&c.length>0?this.costSummaryRequest():this.couponValidator()};e.checkout.prototype.couponValidator=function(){var c=[{name:"projectId",value:this.projectId},
{name:"coupon",value:this.$coupon.val()},{name:"action",value:this.actionValidateCoupon},{name:"total",value:this.$root.find('input[name="totalAmountBeforeDiscount"]').val()},{name:"calendarista_nonce",value:k.nonce}];this.ajax.request(this,this.validationResponse,f.param(c))};e.checkout.prototype.validationResponse=function(c){c=window.JSON.parse(c);var a=this.$root.find('input[name="paymentMethod"]');if(!c.isValid&&c.orderMinimum)this.$coupon.parsley().addError("couponerror",{message:this.couponMinimumAmountError.replace("%s",
c.orderMinimum),updateClass:true});else c.isValid||this.$coupon.parsley().addError("couponerror",{message:this.couponInvalidError,updateClass:true});if(c.isValid&&c.fullDiscount){a.prop("checked",false);a.prop("disabled",true);this.$panels.calendaristaCollapse("hide");a.length===1&&this.paymentLabelStatus(a,"hide")}else this.paymentLabelStatus(a,"show");this.updateTotal(c);this.costSummaryRequest()};e.checkout.prototype.paymentLabelStatus=function(c,a){var b,d;for(b=0;b<c.length;b++){d=f(c[b]);this.paymentMethodChanged(d,
a);d=this.$root.find('label[for="'+d.prop("id")+'"]');if(a==="hide")d.addClass("hide");else d.hasClass("hide")&&d.removeClass("hide")}};e.checkout.prototype.paymentMethodChanged=function(c,a){var b=c.attr("data-calendarista-inline-form"),d=this.$root.find(this.$root.find(c.val()).attr("data-calendarista-operator-panel"));if(d.hasClass("in")&&a==="hide")d.calendaristaCollapse("hide");else!d.hasClass("in")&&c.prop("checked")&&b&&d.calendaristaCollapse("show")};e.checkout.prototype.updateTotal=function(c){var a,
b,d,g;for(a=0;a<this.$paymentOperatorForms.length;a++){b=f(this.$paymentOperatorForms[a]);d=b.attr("data-calendarista-total-name");g=b.attr("data-calendarista-payment-operator");g=g==="stripe"&&c.totalCents?c.totalCents:c.total;b.find('input[name="'+d+'"]').val(g)}};e.checkout.prototype.resetTotal=function(){var c,a,b,d;for(c=0;c<this.$paymentOperatorForms.length;c++){a=f(this.$paymentOperatorForms[c]);b=a.attr("data-calendarista-total-name");d=a.attr("data-calendarista-original-total");a.find('input[name="'+
b+'"]').val(d)}};e.checkout.prototype.costSummaryRequest=function(){var c=[{name:"coupon",value:this.$coupon.val()},{name:"postbackStep",value:"checkout"},{name:"projectId",value:this.projectId},{name:"stagingId",value:this.$stagingId.val()},{name:"__viewstate",value:this.$viewstate.val()},{name:"action",value:this.actionCostSummary},{name:"calendarista_nonce",value:k.nonce}];this.ajax.request(this,this.costSummaryResponse,f.param(c))};e.checkout.prototype.costSummaryResponse=function(c){this.$costSummaryPlaceholder.html(c)};
e.checkout.prototype.costSummaryReset=function(){this.$costSummaryPlaceholder.html("")};e.checkout.prototype.wooCommerceSubmit=function(c){c=c.serializeArray();c.push({name:"action",value:this.wooCommerceAction});c.push({name:"calendarista_nonce",value:k.nonce});this.ajax.request(this,this.wooCommerceResponse,f.param(c))};e.checkout.prototype.wooCommerceResponse=function(c){var a;if(c)a=window.JSON.parse(c);if(a&&a.result){c=parseInt(a.checkoutMode,10);window.location.href=c===0?a.checkoutUrl:a.cartUrl}else this.$bookNowButton.prop("disabled",
false).removeClass("ui-state-disabled")};e.checkout.prototype.paymentTypeChanged=function(c){parseInt(f(c.target).val(),10)!==1&&this.creditCardSection.calendaristaCollapse("hide")};e.checkout.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}this.$couponButton.off();this.$paymentType.off()}})(window.jQuery,window.Calendarista,window.calendarista_wp_ajax);
(function(f,e,k){e.fullcalendar=function(c){this.init(c);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.fullcalendar.prototype.init=function(c){var a=this;this.fullcalendarId=c.fullcalendarId;this.actionPublicFeed="calendarista_appointments_public_feed";this.ajaxUrl=k.url;this.$spinner=f("#"+c.spinnerId);this.projectList=c.projectList;this.view=c.view;this.formElementList=c.formElementList;this.status=c.status;this.includeNameField=c.includeNameField;
this.includeEmailField=c.includeEmailField;this.includeAvailabilityNameField=c.includeAvailabilityNameField;this.includeSeats=c.includeSeats;this.firstDayOfWeek=c.firstDayOfWeek;this.locale=c.locale;this.defaultView="dayGridMonth";this.mobileView="listWeek";if(["week","list"].indexOf(this.view)!==-1)this.defaultView="listWeek";else if(this.view==="day")this.mobileView=this.defaultView="dayGrid";else if(["month","calendar"].indexOf(this.view)!==-1)this.defaultView="dayGridMonth";this.fc=new window.FullCalendar.Calendar(f("#"+
this.fullcalendarId)[0],{plugins:["dayGrid","list"],defaultView:a.mobileCheck()?a.mobileView:a.defaultView,locale:a.locale,firstDay:a.firstDayOfWeek,themeSystem:"",header:{left:"",center:"title"},titleFormat:{year:"numeric",month:"short",day:"numeric"},views:{dayGridMonth:{eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:false}}},windowResize:function(){if(a.mobileCheck()){if(a.defaultView==="listWeek"||a.defaultView==="dayGridMonth")a.fc.changeView("listWeek")}else a.fc.changeView(a.defaultView)},
editable:false,eventLimit:true,eventSources:[{url:a.ajaxUrl,method:"POST",extraParams:function(){return{action:a.actionPublicFeed,projectList:a.projectList,formElementList:a.formElementList,includeNameField:a.includeNameField,includeEmailField:a.includeEmailField,includeAvailabilityNameField:a.includeAvailabilityNameField,includeSeats:a.includeSeats,availabilityId:-1,syncDataFilter:1,status:a.status,calendarista_nonce:k.nonce}},success:function(){},failure:function(){window.console.log("there was an error while fetching events!")}}],
eventTimeFormat:{hour:"numeric",minute:"2-digit"},eventRender:function(b){var d=f(b.el).find(".fc-title"),g=f(b.el).find(".fc-list-item-title"),h=b.event.extendedProps,i=b.view;if(h.headingfield)i.viewSpec.type==="listWeek"?g.html(h.rawTitle):d.html(b.event.title)},eventClick:function(){},eventPositioned:function(){},loading:function(b){b?a.showSpinner():a.hideSpinner()}});this.fc.el&&this.fc.render()};e.fullcalendar.prototype.mobileCheck=function(){if(this.defaultView=="listWeek")return true;return window.innerWidth>=
768?false:true};e.fullcalendar.prototype.showSpinner=function(){this.$spinner.removeClass("calendarista-invisible")};e.fullcalendar.prototype.hideSpinner=function(){this.$spinner.addClass("calendarista-invisible")};e.fullcalendar.prototype.getDate=function(c){var a;try{a=f.datepicker.parseDate("yy-mm-dd",c.value)}catch(b){a=null}return a};e.fullcalendar.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista,
window.calendarista_wp_ajax);
(function(f,e,k,c){e.search=function(a){this.init(a);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.search.prototype.init=function(a){this.id=a.id;this.actionSearch="calendarista_search";this.$root=f("#search_"+this.id);this.$searchResultPlaceHolder=this.$root.find("#search_result_"+this.id);this.ajaxUrl=c.url;this.spinnerId=a.spinnerId;this.ajax=new e.ajax({ajaxUrl:this.ajaxUrl,id:this.spinnerId});this.$projectList=f("#"+a.projectList);this.projectListInclusion=
a.projectListInclusion;this.$searchStartDate=f("#"+a.searchStartDate);this.$searchStartTime=f("#"+a.searchStartTime);this.$searchEndDate=f("#"+a.searchEndDate);this.$searchEndTime=f("#"+a.searchEndTime);this.$searchButton=f("#"+a.searchButton);this.dateFormat=a.dateFormat?a.dateFormat:"DD, d MM, yy";this.firstDayOfWeek=a.firstDayOfWeek;this.resultPageUrl=a.resultPageUrl;this.clearLabel=a.clearLabel;this.onSearchButtonClickDelegate=e.createDelegate(this,this.onSearchButtonClick);this.$searchButton.on("click",
this.onSearchButtonClickDelegate);this.createCalendars();this.pagerButtonDelegates()};e.search.prototype.onSearchButtonClick=function(){this.searchRequest([])};e.search.prototype.searchRequest=function(a){var b=this.$projectList.val()?parseInt(this.$projectList.val(),10):null,d=this.$searchStartDate.val()?this.toYMD(this.parseDate(this.$searchStartDate.val())):null,g=this.$searchStartTime.length>0?this.$searchStartTime.val():null,h=this.$searchEndDate.val()?this.toYMD(this.parseDate(this.$searchEndDate.val())):
null,i=this.$searchEndTime.length>0?this.$searchEndTime.val():null,l=(this.$projectList.length===0||!this.$projectList.val())&&this.projectListInclusion?this.projectListInclusion:null,j=this.$root.find('input[name="tags"]:checked'),m=[],n=k.determine().name();f.each(j,function(){m.push(f(this).val())});a.push({name:"projectId",value:b});a.push({name:"projectList",value:l});a.push({name:"fromDate",value:d});a.push({name:"fromTime",value:g});a.push({name:"toDate",value:h});a.push({name:"toTime",value:i});
a.push({name:"tags",value:m});a.push({name:"timezone",value:n});a.push({name:"clientTime",value:this.toTime(new Date)});a.push({name:"calendarista_nonce",value:c.nonce});if(this.resultPageUrl){a.push({name:"search-result-inline",value:true});if(this.resultPageUrl.indexOf("?")===-1)this.resultPageUrl+="?";a=this.resultPageUrl+f.param(a);this.$searchButton.prop("href",a)}else{a.push({name:"action",value:this.actionSearch});this.ajax.request(this,this.searchResponse,f.param(a))}};e.search.prototype.searchResponse=
function(a){this.$nextPage&&this.$nextPage.off();this.$lastPage&&this.$lastPage.off();this.$prevPage&&this.$prevPage.off();this.$firstPage&&this.$firstPage.off();this.$searchResultPlaceHolder.html(a);this.pagerButtonDelegates()};e.search.prototype.createCalendars=function(){var a=new Date;this.onStartDateSelectDelegate=e.createDelegate(this,this.onStartDateSelect);this.onEndDateSelectDelegate=e.createDelegate(this,this.onEndDateSelect);this.onStartDateCloseDelegate=e.createDelegate(this,this.onStartDateClose);
this.onEndDateCloseDelegate=e.createDelegate(this,this.onEndDateClose);this.$searchStartDate.datepicker({dateFormat:this.dateFormat,firstDay:this.firstDayOfWeek,defaultDate:a,minDate:a,onSelect:this.onStartDateSelectDelegate,onClose:this.onStartDateCloseDelegate,showButtonPanel:true,closeText:this.clearLabel});this.$searchEndDate.datepicker({dateFormat:this.dateFormat,firstDay:this.firstDayOfWeek,defaultDate:a,minDate:a,onSelect:this.onEndDateSelectDelegate,onClose:this.onEndDateCloseDelegate,showButtonPanel:true,
closeText:this.clearLabel});this.$searchStartDate.datepicker().datepicker("setDate",a.setDate(a.getDate()));this.$datepickerElement=f("#ui-datepicker-div");this.createUniqueCalendar()};e.search.prototype.onStartDateSelect=function(){};e.search.prototype.onEndDateSelect=function(){};e.search.prototype.onStartDateClose=function(a){var b=window.event||arguments.callee.caller.caller.caller.arguments[0];b=b.currentTarget||b.delegateTarget;a&&this.parseDate(a);a&&this.$searchStartDate.parsley().reset();
if(b&&f(b).hasClass("ui-datepicker-close"))this.datepickerReset();else if(this.startDateSelected!==a){this.startDateSelected=a;this.$searchEndDate&&this.$searchEndDate.length>0&&this.$searchEndDate.datepicker("option","minDate",this.parseDate(a))}};e.search.prototype.onEndDateClose=function(a){var b=window.event||arguments.callee.caller.caller.caller.arguments[0];b=b.currentTarget||b.delegateTarget;a&&this.parseDate(a);a&&this.$searchEndDate.parsley().reset();if(b&&f(b).hasClass("ui-datepicker-close"))this.datepickerReset();
else if(this.endDateSelected!==a){this.endDateSelected=a;this.$searchStartDate.datepicker("option","maxDate",this.parseDate(a))}};e.search.prototype.pagerButtonDelegates=function(){var a=this;this.$nextPage=this.$searchResultPlaceHolder.find("a.calendarista-next-page");this.$lastPage=this.$searchResultPlaceHolder.find("a.calendarista-last-page");this.$prevPage=this.$searchResultPlaceHolder.find("a.calendarista-prev-page");this.$firstPage=this.$searchResultPlaceHolder.find("a.calendarista-first-page");
this.$nextPage.on("click",function(b){b.preventDefault();a.gotoPage(b);return false});this.$lastPage.on("click",function(b){b.preventDefault();a.gotoPage(b);return false});this.$prevPage.on("click",function(b){b.preventDefault();a.gotoPage(b);return false});this.$firstPage.on("click",function(b){b.preventDefault();a.gotoPage(b);return false})};e.search.prototype.gotoPage=function(a){a=(a=parseInt(f(a.currentTarget).attr("data-calendarista-paged"),10))?[{name:"paged",value:a}]:[];this.$nextPage.off();
this.$lastPage.off();this.$prevPage.off();this.$firstPage.off();this.searchRequest(a)};e.search.prototype.datepickerReset=function(){var a=new Date;this.$searchStartDate.datepicker("setDate",null);this.$searchEndDate.length>0&&this.$searchEndDate.datepicker("setDate",null);this.$searchStartDate.datepicker("option","minDate",a);this.$searchStartDate.datepicker("option","maxDate",null);this.$searchEndDate.datepicker("option","minDate",a);this.endDateSelected=this.startDateSelected=null};e.search.prototype.createUniqueCalendar=
function(){if(!this.$datepickerElement.hasClass("calendarista-calendar-search")){this.$datepickerElement.removeClass(this.$datepickerElement.attr("data-calendarista-classname")+" calendarista-flat calendarista-borderless");this.$datepickerElement.removeAttr("data-calendarista-classname");this.$datepickerElement.attr("data-calendarista-classname","calendarista-calendar-search");this.$datepickerElement.addClass("calendarista-calendar-search calendarista-flat calendarista-borderless");this.$datepickerElement.addClass("calendarista-datepicker")}};
e.search.prototype.parseDate=function(a){return f.datepicker.parseDate(this.dateFormat,a)};e.search.prototype.pad=function(a){return("0"+a).slice(-2)};e.search.prototype.toYMD=function(a){var b=a.getFullYear().toString(),d=(a.getMonth()+1).toString();a=a.getDate().toString();return b+"-"+this.pad(d)+"-"+this.pad(a)};e.search.prototype.toTime=function(a){var b=a.getHours();a=this.pad(a.getMinutes());var d=b>=12?"pm":"am";b%=12;b=b?b:12;return b+":"+a+" "+d};e.search.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",
this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista,window.jstz,window.calendarista_wp_ajax);
(function(f,e,k){e.customForm=function(c){this.init(c);this.unloadDelegate=e.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};e.customForm.prototype.init=function(c){this.id=c.id;this.projectId=c.projectId;this.actionCreateUser="calendarista_create_user";this.actionSignOn="calendarista_signon";this.actionCustomTypeChanged="calendarista_customer_type_changed";this.ajaxUrl=k.url;this.membershipRequired=c.membershipRequired;this.$root=f("#"+this.id);this.ajax=new e.ajax({ajaxUrl:this.ajaxUrl,
id:this.id});this.$viewState=this.$root.find('input[name="__viewstate"]');this.$customerTypeContainer=this.$root.find(".customer-type-container");this.$customerType=this.$root.find('input[name="customerType"]');this.$phoneNumberFields=this.$root.find(".calendarista-phone");this.$email=this.$root.find('input[name="email"]');this.$name=this.$root.find('input[name="name"]');this.$password=this.$root.find('input[name="password"]');this.$createUserValidator=this.$root.find('input[name="createUserValidator"]');
this.$signOnValidator=this.$root.find('input[name="signOnValidator"]');this.$nextButton=this.$root.find('button[name="next"]');this.$form=this.$root.find("form");this.$customerType.on("change",e.createDelegate(this,this.customerTypeChanged));this.nextButtonClickDelegate=e.createDelegate(this,this.nextButtonClicked);this.$nextButton.on("click",this.nextButtonClickDelegate);this.phoneNumberKeyUpDelegate=e.createDelegate(this,this.phoneNumberKeyUp);this.$phoneNumberFields.on("keyup",this.phoneNumberKeyUpDelegate);
this.$container=this.$root.find(".calendarista-custom-form");window.Parsley.hasValidator("calendaristaPhone")||window.Parsley.addValidator("calendaristaPhone",{validateString:function(a,b){if(!window.libphonenumber)return true;return window.libphonenumber.isValidNumber(a,b)}})};e.customForm.prototype.phoneNumberKeyUp=function(c){var a=f(c.currentTarget),b=a.attr("data-parsley-calendarista-phone"),d=a.val();if(window.libphonenumber&&(c.keyCode!=46&&c.keyCode!=8||window.libphonenumber.isValidNumber(d,
b))){c=(new window.libphonenumber.AsYouType(b)).input(d);a.val(c)}};e.customForm.prototype.nextButtonClicked=function(){var c,a=parseInt(this.$customerType.filter(":checked").val(),10);if(e.wizard.isValid(this.$root)){if(this.membershipRequired){c=[{name:"projectId",value:this.projectId},{name:"name",value:this.$name.val()},{name:"email",value:this.$email.val()},{name:"password",value:this.$password.val()},{name:"calendarista_nonce",value:k.nonce}];if(a===0&&!this.$customerTypeContainer.hasClass("hide")){this.$createUserValidator.val("");
c.push({name:"action",value:this.actionCreateUser});this.ajax.request(this,this.createUserResponse,f.param(c))}else if(a===1){this.$signOnValidator.val("");c.push({name:"action",value:this.actionSignOn});this.ajax.request(this,this.signOnResponse,f.param(c))}}this.unload()}};e.customForm.prototype.createUserResponse=function(c){var a=this.$root.find(".create-user-error");if(c==="null"){e.wizard.isValid(this.$root);a.removeClass("hide")}this.$createUserValidator.val(1);if(c!=="null"){c=window.JSON.parse(c);
window.calendarista_wp_ajax.nonce=c.nonce;a.addClass("hide");this.$customerTypeContainer.addClass("hide");this.$nextButton.click()}};e.customForm.prototype.signOnResponse=function(c){var a=this.$root.find(".signon-error");if(c==="null"){e.wizard.isValid(this.$root);a.removeClass("hide")}this.$signOnValidator.val(1);if(c!=="null"){c=window.JSON.parse(c);window.calendarista_wp_ajax.nonce=c.nonce;a.addClass("hide");this.$customerType.filter('[value="0"]').prop("checked",true);this.customerTypeRequest();
this.$customerTypeContainer.addClass("hide")}};e.customForm.prototype.customerTypeChanged=function(){this.customerTypeRequest()};e.customForm.prototype.customerTypeRequest=function(){var c=parseInt(this.$customerType.filter(":checked").val(),10),a=this.$form.serializeArray();a.push({name:"customerType",value:c});a.push({name:"projectId",value:this.projectId});a.push({name:"selectedStep",value:3});a.push({name:"__viewstate",value:this.$viewState.val()});a.push({name:"action",value:this.actionCustomTypeChanged});
a.push({name:"calendarista_nonce",value:k.nonce});this.ajax.request(this,this.customerTypeChangedResponse,f.param(a))};e.customForm.prototype.customerTypeChangedResponse=function(c){this.$container.html(c);this.$email=this.$root.find('input[name="email"]');this.$name=this.$root.find('input[name="name"]');this.$password=this.$root.find('input[name="password"]')};e.customForm.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}this.$customerType.off();
this.$root.off("click",'button[name="next"]',this.nextButtonClickDelegate)}})(window.jQuery,window.Calendarista,window.calendarista_wp_ajax);
(function(f,e,k){e.userprofile=function(c){this.init(c);this.destroyDelegate=e.createDelegate(this,this.destroy);f(window).on("unload",this.destroyDelegate)};e.userprofile.prototype.init=function(c){this.id=c.id;this.userprofileAction="calendarista_user_profile";this.actionEditAppointment="calendarista_user_edit_appointment";this.actionUpdateAppointment="calendarista_user_update_appointment";this.ajaxUrl=k.url;this.enableEdit=c.enableEdit;this.editPolicy=c.editPolicy;this.pluginDir=c.pluginDir;this.userProfileAjax=
new e.ajax({ajaxUrl:this.ajaxUrl,id:"userprofile"});this.editAppointmentAjax=new e.ajax({ajaxUrl:this.ajaxUrl,id:"edit_appointment"});this.$root=f("#"+this.id);this.$container=this.$root.find(".calendarista-userprofile-placeholder");this.$editAppointmentPlaceHolder=this.$root.find("#calendarista-edit-appointment-placeholder");this.initAjaxElements();this.pagerButtonDelegates();!this.$editAppointmentsModalDialog&&this.enableEdit&&this.createEditDialog()};e.userprofile.prototype.initAjaxElements=function(){var c=
this;this.$form=this.$root.find("form");this.$tabItemLinks=this.$root.find(".nav-item a");this.selectedIndex=parseInt(this.$root.find(".nav-item a.nav-link.active").attr("data-calendarista-index"),10);this.$navTabs=this.$root.find(".nav.nav-tabs");this.$dropdownList=this.$root.find("#dropdown_"+this.id);this.$dropdownListOptions=this.$dropdownList.find("option");this.windowResizeDelegate=e.createDelegate(this,this.windowResize);f(window).on("resize",this.windowResizeDelegate);this.$tabItemLinks.on("click",
function(a){var b=f(a.currentTarget);a.preventDefault();c.activeTab(b);c.pagedValue=null;c.selectedIndex=parseInt(b.attr("data-calendarista-index"),10);b.prop("disabled")||c.request(c.selectedIndex);return false});this.$dropdownList.on("change",function(a){a=f(a.currentTarget).find(":selected");c.selectedIndex=parseInt(a.attr("data-calendarista-index"),10);c.request(c.selectedIndex)});this.mobileCheck();this.request(this.selectedIndex)};e.userprofile.prototype.activeTab=function(c){var a,b;for(a=
0;a<this.$tabItemLinks.length;a++){b=f(this.$tabItemLinks[a]);b.removeClass("active")}c.addClass("active")};e.userprofile.prototype.windowResize=function(){this.mobileCheck()};e.userprofile.prototype.mobileCheck=function(){if(this.appointment!==1&&window.innerWidth>=768){this.$navTabs.removeClass("hide");this.$dropdownList.addClass("hide")}else{this.$dropdownList.removeClass("hide");this.$navTabs.addClass("hide")}};e.userprofile.isValid=function(c,a){var b=true;a||(a=".calendarista_parsley_validated, .woald_parsley_validated");
c.find(a).each(function(){var d=f(this);if(d.prop("type")!=="hidden"&&(!d.is(":visible")||d.is(":disabled")||d.attr("data-parsley-excluded")))return true;d.parsley().reset();d=d.parsley?d.parsley().validate():true;if(d!==null&&typeof d==="object"&&d.length>0)b=false});return b};e.userprofile.prototype.request=function(c,a){var b=this.$form.serializeArray();b.push({name:"selectedIndex",value:c});b.push({name:"action",value:this.userprofileAction});b.push({name:"enableEdit",value:this.enableEdit});
b.push({name:"editPolicy",value:this.editPolicy});b.push({name:"calendarista_nonce",value:k.nonce});this.pagedValue&&b.push({name:"paged",value:this.pagedValue});if(a)b=b.concat(a);this.userProfileAjax.request(this,this.response,f.param(b))};e.userprofile.prototype.response=function(c){var a=this;this.$viewmoreButtons=this.$container.find(".calendarista-viewmore");this.$viewmoreButtons.length>0&&this.$viewmoreButtons.off();this.$cancelButtons=this.$container.find('button[name="bookedAvailabilityId"]');
this.$editButtons=this.$container.find('button[name="editAppointment"]');this.$cancelButtons.length>0&&this.$cancelButtons.off();this.$nextPage&&this.$nextPage.off();this.$lastPage&&this.$lastPage.off();this.$prevPage&&this.$prevPage.off();this.$firstPage&&this.$firstPage.off();this.$container.replaceWith(c);this.$container=this.$root.find(".calendarista-userprofile-placeholder");this.$viewmoreButtons=this.$container.find(".calendarista-viewmore");this.$cancelButtons=this.$container.find('button[name="bookedAvailabilityId"]');
this.$editButtons=this.$container.find('button[name="editAppointment"]');this.$viewmoreButtons.on("click",function(){var b=f(this),d=b.attr("data-bs-target");d=f(d);b=b.find("i");if(b.hasClass("fa-plus")){b.removeClass("fa-plus");b.addClass("fa-minus")}else{b.removeClass("fa-minus");b.addClass("fa-plus")}d.calendaristaCollapse("toggle")});this.$cancelButtons.on("click",function(){var b=parseInt(f(this).val(),10),d=parseInt(f("#order_id_"+b).val(),10);a.request(a.selectedIndex,[{name:"bookedAvailabilityId",
value:b},{name:"orderId",value:d}])});this.$editButtons.on("click",function(){var b=f(this),d=parseInt(b.val(),10),g=parseInt(b.attr("data-calendarista-project-id"),10),h=parseInt(b.attr("data-calendarista-availability-id"),10);b=parseInt(b.attr("data-calendarista-booked-availability-id"),10);d=[{name:"projectId",value:g},{name:"availabilityId",value:h},{name:"orderId",value:d},{name:"editMode",value:0},{name:"appointment",value:1},{name:"bookedAvailabilityId",value:b},{name:"action",value:a.actionEditAppointment},
{name:"calendarista_nonce",value:k.nonce}];a.$editAppointmentsModalDialog.dialog("widget").find(".ui-dialog-buttonset").addClass("calendarista_"+g);a.$editAppointmentsModalDialog.dialog("open");a.editAppointmentAjax.request(a,a.editAppointmentResponse,f.param(d))});this.pagerButtonDelegates();this.scrollTop()};e.userprofile.prototype.editAppointmentResponse=function(c){this.$editAppointmentPlaceHolder.replaceWith('<div id="calendarista-edit-appointment-placeholder">'+c+"</div>");this.$editAppointmentPlaceHolder=
f("#calendarista-edit-appointment-placeholder")};e.userprofile.prototype.updateAppointmentResponse=function(){this.$editAppointmentsModalDialog.dialog("close");this.$editAppointmentPlaceHolder.empty();this.request(this.selectedIndex)};e.userprofile.prototype.createEditDialog=function(){var c=this;this.$editAppointmentPlaceHolder=this.$root.find("#calendarista-edit-appointment-placeholder");this.$editAppointmentsModalDialog=this.$root.find("#calendarista-edit-appointments-modal").dialog({autoOpen:false,
height:"480",width:"640",modal:true,resizable:false,dialogClass:"calendarista-dialog calendarista-user-edit-appointment-dialog",closeOnEscape:false,open:function(a,b){f(".ui-dialog-titlebar-close",b.dialog|b).hide()},create:function(){var a='<span id="spinner_edit_appointment" style="margin-right: 10px" class="calendarista-spinner calendarista-invisible">';a+='<img src="'+c.pluginDir+'assets/img/transparent.gif">';a+="</span>";f(this).dialog("widget").find(".ui-dialog-buttonset").prepend(a)},buttons:[{text:"Update",
name:"updateAppointment",click:function(){var a;a=c.$editAppointmentsModalDialog.find("form");if(!e.wizard.isValid(a))return false;c.$editAppointmentsModalDialog.find('input[name="controller"]').val("calendarista_appointments");a=a.serialize();a+="&calendarista_nonce="+k.nonce+"&appointment=1&editMode=1&calendarista_update=1&action="+c.actionUpdateAppointment;c.editAppointmentAjax.request(c,c.updateAppointmentResponse,a)}},{text:"Exit",name:"dispose",click:function(){c.$editAppointmentsModalDialog.dialog("close");
c.$editAppointmentPlaceHolder.empty();c.request(c.selectedIndex)}}]})};e.userprofile.prototype.pagerButtonDelegates=function(){var c=this;this.$nextPage=this.$container.find("a.calendarista-next-page");this.$lastPage=this.$container.find("a.calendarista-last-page");this.$prevPage=this.$container.find("a.calendarista-prev-page");this.$firstPage=this.$container.find("a.calendarista-first-page");this.$nextPage.on("click",function(a){a.preventDefault();c.gotoPage(a);return false});this.$lastPage.on("click",
function(a){a.preventDefault();c.gotoPage(a);return false});this.$prevPage.on("click",function(a){a.preventDefault();c.gotoPage(a);return false});this.$firstPage.on("click",function(a){a.preventDefault();c.gotoPage(a);return false})};e.userprofile.prototype.gotoPage=function(c){this.pagedValue=parseInt(f(c.currentTarget).attr("data-calendarista-paged"),10);this.$nextPage.off();this.$lastPage.off();this.$prevPage.off();this.$firstPage.off();this.request(this.selectedIndex)};e.userprofile.prototype.scrollTop=
function(){var c=f("#navbar_"+this.id),a=f("#dropdown_"+this.id);c=!c.hasClass("hide")?c:a;c.length>0&&c[0].scrollIntoView({block:"center",behaviour:"smooth"})};e.userprofile.prototype.destroy=function(){this.$tabItemLinks&&this.$tabItemLinks.off();this.$dropdownList&&this.$dropdownList.off();this.$viewmoreButtons.length>0&&this.$viewmoreButtons.off();this.$cancelButtons.length>0&&this.$cancelButtons.off();this.$editButtons.length>0&&this.$editButtons.off();delete this.$tabItemLinks;if(this.destroyDelegate){f(window).off("unload",
this.destroyDelegate);delete this.destroyDelegate}}})(window.jQuery,window.Calendarista,window.calendarista_wp_ajax);
