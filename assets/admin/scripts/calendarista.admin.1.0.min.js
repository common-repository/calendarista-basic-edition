(function(e,f){var c=e.Calendarista||{};c.imageSelector=function(a){this.options=a||{};this.$root=f(a.id);this.previewImageUrl=a.previewImageUrl;this.unloadDelegate=c.createDelegate(this,this.unloadHandler);f(e).on("unload",this.unloadDelegate);this.initialize()};c.imageSelector.prototype.initialize=function(){var a=this;this.$iconUrlRemove=this.$root.find('button[name="iconUrlRemove"]');this.$previewThumbnail=this.$root.find(".preview-icon");this.galleryWindow=e.wp.media({title:"Select an icon",
library:{type:"image"},multiple:false,button:{text:"Select"}});this.$previewThumbnail.on("click",function(b){a.$selectedPreviewElement=f(this);b.preventDefault();a.galleryWindow.open()});this.$iconUrlRemove.on("click",function(b){b.stopPropagation();b=a.previewImageUrl;var d=f(this),g=d.attr("data-calendarista-preview-icon"),h=a.$root.find('input[name="'+g+'"]');a.$root.find('div[data-calendarista-preview-icon="'+g+'"]').css({"background-image":"url("+b+")"});d.prop("disabled",true);h.val("")});this.galleryWindow.on("select",
function(){var b=a.galleryWindow.state().get("selection").first().toJSON();a.imagePickerSelectionChanged(b.url,b.height,b.width)});this.removeButtonState()};c.imageSelector.prototype.imagePickerSelectionChanged=function(a){var b=this.$root.find('input[name="'+this.$selectedPreviewElement.attr("data-calendarista-preview-icon")+'"]');this.$selectedPreviewElement.css({"background-image":"url("+a+")"});b.val(a);this.removeButtonState()};c.imageSelector.prototype.removeButtonState=function(){var a,b,d;
for(a=0;a<this.$iconUrlRemove.length;a++){b=f(this.$iconUrlRemove[a]);d=b.attr("data-calendarista-preview-icon");(d=this.$root.find('input[name="'+d+'"]').val())?b.prop("disabled",false):b.prop("disabled",true)}};c.imageSelector.prototype.unloadHandler=function(){this.$iconUrlRemove&&this.$iconUrlRemove.off();this.$previewThumbnail&&this.$previewThumbnail.off();delete this.unloadDelegate};e.Calendarista||(e.Calendarista=c)})(window,window.jQuery);
(function(e,f){var c=e.Calendarista||{};c.listPager=function(a){this.options=a||{};this.id=a.id;this.$root=f(a.id);this.callback=a.callback;this.unloadDelegate=c.createDelegate(this,this.unloadHandler);f(e).on("unload",this.unloadDelegate);this.initialize()};c.listPager.prototype.initialize=function(){};c.listPager.prototype.pagerButtonDelegates=function(){var a=this;this.$root=f(this.id);this.$nextPage=this.$root.find('a[class="next-page"]');this.$lastPage=this.$root.find('a[class="last-page"]');
this.$prevPage=this.$root.find('a[class="prev-page"]');this.$firstPage=this.$root.find('a[class="first-page"]');this.$nextPage.on("click",function(b){a.gotoPage(b)});this.$lastPage.on("click",function(b){a.gotoPage(b)});this.$prevPage.on("click",function(b){a.gotoPage(b)});this.$firstPage.on("click",function(b){a.gotoPage(b)})};c.listPager.prototype.gotoPage=function(a){var b=this.getUrlParameter("paged",f(a.currentTarget).attr("href"));b=b?[{name:"paged",value:b}]:[];this.$nextPage.off();this.$lastPage.off();
this.$prevPage.off();this.$firstPage.off();this.callback&&this.callback(b);a.preventDefault();return false};c.listPager.prototype.removeURLParameter=function(a){var b=e.location.href,d=b.split("?");if(d.length>=2){a=encodeURIComponent(a)+"=";b=d[1].split(/[&;]/g);for(var g=b.length;g-- >0;)b[g].lastIndexOf(a,0)!==-1&&b.splice(g,1);b=d[0]+"?"+b.join("&")}e.history.replaceState({},document.title,b)};c.listPager.prototype.getUrlParameter=function(a,b){var d;a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");
d=RegExp("[\\?&]"+a+"=([^&#]*)").exec(b);return d===null?"":decodeURIComponent(d[1].replace(/\+/g," "))};c.listPager.prototype.unloadHandler=function(){this.$nextPage&&this.$nextPage.off();this.$lastPage&&this.$lastPage.off();this.$prevPage&&this.$prevPage.off();this.$firstPage&&this.$firstPage.off();delete this.unloadDelegate};e.Calendarista||(e.Calendarista=c)})(window,window.jQuery);
